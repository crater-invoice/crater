import{a2 as ve,C as ee,v as L,$ as T,g as M,l as z,r as b,o as q,n as F,w as d,b as C,c as k,t as U,q as P,I as E,L as ne,M as ie,m as e,a as t,H as O,e as G,a5 as ce,W as J,aa as oe,ab as re,F as j,a3 as ae,h as I,i as D,ap as te,k as W,s as R,X as le,u as se,a1 as de,j as X,p as K,K as ge,G as _e,ad as be,Z as $e,E as pe,af as ue,f as fe,aP as we}from"./main-vzIkKseS.js";import{u as Q}from"./mail-driver-9YpfUUN4.js";const A=(i=!1)=>{const V=i?window.pinia.defineStore:ve,u=ee();return V({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((r,n)=>{L.get("/api/v1/installation/requirements").then(g=>{r(g)}).catch(g=>{T(g),n(g)})})},fetchInstallationStep(){return new Promise((r,n)=>{L.get("/api/v1/installation/wizard-step").then(g=>{r(g)}).catch(g=>{T(g),n(g)})})},addInstallationStep(r){return new Promise((n,g)=>{L.post("/api/v1/installation/wizard-step",r).then(o=>{n(o)}).catch(o=>{T(o),g(o)})})},fetchInstallationPermissions(){return new Promise((r,n)=>{L.get("/api/v1/installation/permissions").then(g=>{r(g)}).catch(g=>{T(g),n(g)})})},fetchInstallationDatabase(r){return new Promise((n,g)=>{L.get("/api/v1/installation/database/config",{params:r}).then(o=>{n(o)}).catch(o=>{T(o),g(o)})})},addInstallationDatabase(r){return new Promise((n,g)=>{L.post("/api/v1/installation/database/config",r).then(o=>{n(o)}).catch(o=>{T(o),g(o)})})},addInstallationFinish(){return new Promise((r,n)=>{L.post("/api/v1/installation/finish").then(g=>{r(g)}).catch(g=>{T(g),n(g)})})},setInstallationDomain(r){return new Promise((n,g)=>{L.put("/api/v1/installation/set-domain",r).then(o=>{n(o)}).catch(o=>{T(o),g(o)})})},installationLogin(){return new Promise((r,n)=>{L.get("/sanctum/csrf-cookie").then(g=>{g&&L.post("/api/v1/installation/login").then(o=>{u.setSelectedCompany(o.data.company),r(o)}).catch(o=>{T(o),n(o)})})})},checkAutheticated(){return new Promise((r,n)=>{L.get("/api/v1/auth/check").then(g=>{r(g)}).catch(g=>{n(g)})})}}})()},he={class:"w-full md:w-2/3"},ye={class:"mb-6"},Ie={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},qe={class:"col-span-2 text-sm"},Be={class:"text-right"},Ce={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},Ve={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},De={key:1},Se={class:"col-span-2 text-sm"},Fe={class:"text-right"},Me={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ze={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},ke={emits:["next"],setup(i,{emit:V}){const u=M(""),r=M(""),n=M(!1);M(!0);const g=A(),o=z(()=>{if(u.value){let m=!0;for(const s in u.value)return u.value[s]||(m=!1),u.value&&r.value.supported&&m}return!1});async function f(){var s,h,a,p;n.value=!0;const m=await g.fetchInstallationRequirements();m.data&&(u.value=(a=(h=(s=m==null?void 0:m.data)==null?void 0:s.requirements)==null?void 0:h.requirements)==null?void 0:a.php,r.value=(p=m==null?void 0:m.data)==null?void 0:p.phpSupportInfo)}function l(){n.value=!0,V("next"),n.value=!1}return(m,s)=>{const h=b("BaseIcon"),a=b("BaseButton"),p=b("BaseWizardStep");return q(),F(p,{title:m.$t("wizard.req.system_req"),description:m.$t("wizard.req.system_req_desc")},{default:d(()=>[C("div",he,[C("div",ye,[r.value?(q(),k("div",Ie,[C("div",qe,U(m.$t("wizard.req.php_req_version",{version:r.value.minimum})),1),C("div",Be,[P(U(r.value.current)+" ",1),r.value.supported?(q(),k("span",Ce)):(q(),k("span",Ve))])])):E("",!0),u.value?(q(),k("div",De,[(q(!0),k(ne,null,ie(u.value,($,B)=>(q(),k("div",{key:B,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[C("div",Se,U(B),1),C("div",Fe,[$?(q(),k("span",Me)):(q(),k("span",ze))])]))),128))])):E("",!0)]),e(o)?(q(),F(a,{key:0,onClick:l},{left:d($=>[t(h,{name:"ArrowRightIcon",class:O($.class)},null,8,["class"])]),default:d(()=>[P(U(m.$t("wizard.continue"))+" ",1)]),_:1})):E("",!0),u.value?E("",!0):(q(),F(a,{key:1,loading:n.value,disabled:n.value,onClick:f},{default:d(()=>[P(U(m.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Ue={key:1,class:"relative"},Pe={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ne={class:"col-span-2 p-3"},Ee={class:"p-3 text-right"},Ge={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},Oe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},xe={emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1),n=M([]);const{tm:g,t:o}=G(),f=A(),l=ce();J(()=>{m()});async function m(){u.value=!0;const h=await f.fetchInstallationPermissions();n.value=h.data.permissions.permissions,h.data&&h.data.permissions.errors&&setTimeout(()=>{l.openDialog({title:g("wizard.permissions.permission_confirm_title"),message:o("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(a=>{a.data&&(u.value=!1)})},500),u.value=!1}function s(){r.value=!0,V("next"),r.value=!1}return(h,a)=>{const p=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),B=b("BaseContentPlaceholders"),c=b("BaseIcon"),_=b("BaseButton"),v=b("BaseWizardStep");return q(),F(v,{title:h.$t("wizard.permissions.permissions"),description:h.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(u)?(q(),F(B,{key:0},{default:d(()=>[(q(),k(ne,null,ie(3,(w,y)=>C("div",{key:y,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[t(p,{lines:1,class:"col-span-4 p-3"})])),64)),t($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),k("div",Ue,[(q(!0),k(ne,null,ie(e(n),(w,y)=>(q(),k("div",{key:y,class:"border border-gray-200"},[C("div",Pe,[C("div",Ne,U(w.folder),1),C("div",Ee,[w.isSet?(q(),k("span",Ge)):(q(),k("span",Oe)),C("span",null,U(w.permission),1)])])]))),128)),oe(t(_,{class:"mt-10",loading:e(r),disabled:e(r),onClick:s},{left:d(w=>[t(c,{name:"ArrowRightIcon",class:O(w.class)},null,8,["class"])]),default:d(()=>[P(" "+U(h.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(u)]])]))]),_:1},8,["title","description"])}}},Le=["onSubmit"],We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Re={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),g=ae("utils"),o=A();J(()=>{for(const p in f.value)u.configData.hasOwnProperty(p)&&(f.value[p]=u.configData[p])});const f=z(()=>o.currentDataBaseData),l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(n("validation.required"),D)},database_hostname:{required:I.withMessage(n("validation.required"),D)},database_port:{required:I.withMessage(n("validation.required"),D),numeric:te},database_name:{required:I.withMessage(n("validation.required"),D)},database_username:{required:I.withMessage(n("validation.required"),D)},app_url:{required:I.withMessage(n("validation.required"),D),isUrl:I.withMessage(n("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",f.value)}function a(){s.value.database_connection.$touch(),V("on-change-driver",f.value.database_connection)}return(p,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:R(h,["prevent"])},[C("div",We,[t(c,{label:p.$t("wizard.database.app_url"),error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.connection"),error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.port"),error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_port,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_port=y),invalid:e(s).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.db_name"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_name,"onUpdate:modelValue":$[3]||($[3]=y=>e(f).database_name=y),invalid:e(s).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.username"),error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_username,"onUpdate:modelValue":$[4]||($[4]=y=>e(f).database_username=y),invalid:e(s).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(c,{label:p.$t("wizard.database.password")},{default:d(()=>[t(B,{modelValue:e(f).database_password,"onUpdate:modelValue":$[5]||($[5]=y=>e(f).database_password=y),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),t(c,{label:p.$t("wizard.database.host"),error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>e(f).database_hostname=y),invalid:e(s).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),t(w,{type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(y=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Le)}}},Te=["onSubmit"],je={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ae={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),g=ae("utils"),o=A(),f=z(()=>o.currentDataBaseData);J(()=>{for(const p in f.value)u.configData.hasOwnProperty(p)&&(f.value[p]=u.configData[p])});const l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(n("validation.required"),D)},database_hostname:{required:I.withMessage(n("validation.required"),D)},database_port:{required:I.withMessage(n("validation.required"),D),numeric:te},database_name:{required:I.withMessage(n("validation.required"),D)},database_username:{required:I.withMessage(n("validation.required"),D)},app_url:{required:I.withMessage(n("validation.required"),D),isUrl:I.withMessage(n("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",f.value)}function a(){s.value.database_connection.$touch(),V("on-change-driver",f.value.database_connection)}return(p,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:R(h,["prevent"])},[C("div",je,[t(c,{label:p.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.port"),"content-loading":i.isFetchingInitialData,error:e(s).database_port.$error&&e(s).database_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_port,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_port=y),"content-loading":i.isFetchingInitialData,invalid:e(s).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.db_name"),"content-loading":i.isFetchingInitialData,error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_name,"onUpdate:modelValue":$[3]||($[3]=y=>e(f).database_name=y),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.username"),"content-loading":i.isFetchingInitialData,error:e(s).database_username.$error&&e(s).database_username.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_username,"onUpdate:modelValue":$[4]||($[4]=y=>e(f).database_username=y),"content-loading":i.isFetchingInitialData,invalid:e(s).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{"content-loading":i.isFetchingInitialData,label:p.$t("wizard.database.password")},{default:d(()=>[t(B,{modelValue:e(f).database_password,"onUpdate:modelValue":$[5]||($[5]=y=>e(f).database_password=y),"content-loading":i.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t(c,{label:p.$t("wizard.database.host"),"content-loading":i.isFetchingInitialData,error:e(s).database_hostname.$error&&e(s).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_hostname,"onUpdate:modelValue":$[6]||($[6]=y=>e(f).database_hostname=y),"content-loading":i.isFetchingInitialData,invalid:e(s).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),oe(t(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(y=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!i.isFetchingInitialData]])],40,Te)}}},Ye=["onSubmit"],Ze={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ke={props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const u=i,r=j(["sqlite","mysql","pgsql"]),{t:n}=G(),g=ae("utils"),o=A(),f=z(()=>o.currentDataBaseData);J(()=>{for(const p in f.value)u.configData.hasOwnProperty(p)&&(f.value[p]=u.configData[p])});const l=p=>g.checkValidUrl(p),m={database_connection:{required:I.withMessage(n("validation.required"),D)},database_name:{required:I.withMessage(n("validation.required"),D)},app_url:{required:I.withMessage(n("validation.required"),D),isUrl:I.withMessage(n("validation.invalid_url"),l)}},s=W(m,f.value);function h(){if(s.value.$touch(),s.value.$invalid)return!0;V("submit-data",f.value)}function a(){s.value.database_connection.$touch(),V("on-change-driver",f.value.database_connection)}return(p,$)=>{const B=b("BaseInput"),c=b("BaseInputGroup"),_=b("BaseMultiselect"),v=b("BaseIcon"),w=b("BaseButton");return q(),k("form",{action:"",onSubmit:R(h,["prevent"])},[C("div",Ze,[t(c,{label:p.$t("wizard.database.app_url"),"content-loading":i.isFetchingInitialData,error:e(s).app_url.$error&&e(s).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(f).app_url,"onUpdate:modelValue":$[0]||($[0]=y=>e(f).app_url=y),"content-loading":i.isFetchingInitialData,invalid:e(s).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.connection"),"content-loading":i.isFetchingInitialData,error:e(s).database_connection.$error&&e(s).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:e(f).database_connection,"onUpdate:modelValue":[$[1]||($[1]=y=>e(f).database_connection=y),a],"content-loading":i.isFetchingInitialData,invalid:e(s).database_connection.$error,options:e(r),"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(c,{label:p.$t("wizard.database.db_path"),error:e(s).database_name.$error&&e(s).database_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[t(B,{modelValue:e(f).database_name,"onUpdate:modelValue":$[2]||($[2]=y=>e(f).database_name=y),"content-loading":i.isFetchingInitialData,invalid:e(s).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),oe(t(w,{"content-loading":i.isFetchingInitialData,type:"submit",class:"mt-4",loading:i.isSaving,disabled:i.isSaving},{left:d(y=>[i.isSaving?E("",!0):(q(),F(v,{key:0,name:"SaveIcon",class:O(y.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(p.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!i.isFetchingInitialData]])],40,Ye)}}},He={components:{Mysql:Re,Pgsql:Ae,Sqlite:Ke},emits:["next"],setup(i,{emit:V}){const u=M("mysql"),r=M(!1),{t:n}=G(),g=se(),o=A(),f=z(()=>o.currentDataBaseData);async function l(s){let h={connection:s};const a=await o.fetchInstallationDatabase(h);a.data.success&&(f.value.database_connection=a.data.config.database_connection),s==="sqlite"?f.value.database_name=a.data.config.database_name:f.value.database_name=null}async function m(s){r.value=!0;try{let h=await o.addInstallationDatabase(s);if(r.value=!1,h.data.success){await o.addInstallationFinish(),V("next",3),g.showNotification({type:"success",message:n("wizard.success."+h.data.success)});return}else if(h.data.error){if(h.data.requirement){g.showNotification({type:"error",message:n("wizard.errors."+h.data.error,{version:h.data.requirement.minimum,name:s.value.database_connection})});return}g.showNotification({type:"error",message:n("wizard.errors."+h.data.error)})}else h.data.errors?g.showNotification({type:"error",message:h.data.errors[0]}):h.data.error_message&&g.showNotification({type:"error",message:h.data.error_message})}catch{g.showNotification({type:"error",message:n("validation.something_went_wrong")}),r.value=!1}finally{r.value=!1}}return{databaseData:f,database_connection:u,isSaving:r,getDatabaseConfig:l,next:m}}};function Je(i,V,u,r,n,g){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.database.database"),description:i.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),F(de(r.databaseData.database_connection),{"config-data":r.databaseData,"is-saving":r.isSaving,onOnChangeDriver:r.getDatabaseConfig,onSubmitData:r.next},null,8,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}const Xe=le(He,[["render",Je]]),Qe={class:"w-full md:w-2/3"},ea=C("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),aa=C("ul",{class:"w-full text-gray-600 list-disc list-inside"},[C("li",{class:"text-sm leading-8"},[P(" App domain should not contain "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),P(" or "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),P(" in front of the domain. ")]),C("li",{class:"text-sm leading-8"},[P(" If you're accessing the website on a different port, please mention the port. For example: "),C("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),ta={emits:["next"],setup(i,{emit:V}){const u=j({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),r=M(!1),{t:n}=G(),g=ae("utils"),o=a=>g.checkValidDomainUrl(a),f=A(),l=se(),m={app_domain:{required:I.withMessage(n("validation.required"),D),isUrl:I.withMessage(n("validation.invalid_domain_url"),o)}},s=W(m,z(()=>u));async function h(){if(s.value.$touch(),s.value.$invalid)return!0;r.value=!0;try{await f.setInstallationDomain(u),await f.installationLogin(),(await f.checkAutheticated()).data&&V("next",4),r.value=!1}catch{l.showNotification({type:"error",message:n("wizard.verify_domain.failed")}),r.value=!1}}return(a,p)=>{const $=b("BaseInput"),B=b("BaseInputGroup"),c=b("BaseButton"),_=b("BaseWizardStep");return q(),F(_,{title:a.$t("wizard.verify_domain.title"),description:a.$t("wizard.verify_domain.desc")},{default:d(()=>[C("div",Qe,[t(B,{label:a.$t("wizard.verify_domain.app_domain"),error:e(s).app_domain.$error&&e(s).app_domain.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:e(u).app_domain,"onUpdate:modelValue":p[0]||(p[0]=v=>e(u).app_domain=v),invalid:e(s).app_domain.$error,type:"text",onInput:p[1]||(p[1]=v=>e(s).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),ea,aa,t(c,{loading:r.value,disabled:r.value,class:"mt-8",onClick:h},{default:d(()=>[P(U(a.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},na=["onSubmit"],ia={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},la={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},sa={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=j(["tls","ssl","starttls"]),{t:n}=G(),g=Q(),o=z(()=>g.smtpConfig),f=z(()=>u.value?"text":"password");o.value.mail_driver="smtp";const l=z(()=>({smtpConfig:{mail_driver:{required:I.withMessage(n("validation.required"),D)},mail_host:{required:I.withMessage(n("validation.required"),D)},mail_port:{required:I.withMessage(n("validation.required"),D),numeric:I.withMessage(n("validation.numbers_only"),te)},mail_encryption:{required:I.withMessage(n("validation.required"),D)},from_mail:{required:I.withMessage(n("validation.required"),D),email:I.withMessage(n("validation.email_incorrect"),X)},from_name:{required:I.withMessage(n("validation.required"),D)}}})),m=W(l,z(()=>g));async function s(){return m.value.$touch(),m.value.$invalid||V("submit-data",g.smtpConfig),!1}function h(){m.value.smtpConfig.mail_driver.$touch(),V("on-change-driver",g.smtpConfig.mail_driver)}return(a,p)=>{const $=b("BaseMultiselect"),B=b("BaseInputGroup"),c=b("BaseInput"),_=b("BaseIcon"),v=b("BaseButton");return q(),k("form",{onSubmit:R(s,["prevent"])},[C("div",ia,[t(B,{label:a.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_driver.$error&&e(m).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[p[0]||(p[0]=w=>e(o).mail_driver=w),h],options:e(g).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(m).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(B,{label:a.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(m).smtpConfig.mail_host.$error&&e(m).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(c,{modelValue:e(o).mail_host,"onUpdate:modelValue":p[1]||(p[1]=w=>e(o).mail_host=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:p[2]||(p[2]=w=>e(m).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",oa,[t(B,{label:a.$t("wizard.mail.username"),"content-loading":i.isFetchingInitialData},{default:d(()=>[t(c,{modelValue:e(o).mail_username,"onUpdate:modelValue":p[3]||(p[3]=w=>e(o).mail_username=w),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),t(B,{label:a.$t("wizard.mail.password"),"content-loading":i.isFetchingInitialData},{default:d(()=>[t(c,{modelValue:e(o).mail_password,"onUpdate:modelValue":p[6]||(p[6]=w=>e(o).mail_password=w),modelModifiers:{trim:!0},type:e(f),"content-loading":i.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(u)?(q(),F(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:p[4]||(p[4]=w=>K(u)?u.value=!e(u):u=!e(u))})):(q(),F(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:p[5]||(p[5]=w=>K(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),C("div",ra,[t(B,{label:a.$t("wizard.mail.port"),error:e(m).smtpConfig.mail_port.$error&&e(m).smtpConfig.mail_port.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[t(c,{modelValue:e(o).mail_port,"onUpdate:modelValue":p[7]||(p[7]=w=>e(o).mail_port=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:p[8]||(p[8]=w=>e(m).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(B,{label:a.$t("wizard.mail.encryption"),error:e(m).smtpConfig.mail_encryption.$error&&e(m).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[t($,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":p[9]||(p[9]=w=>e(o).mail_encryption=w),modelModifiers:{trim:!0},options:e(r),"can-deselect":!1,invalid:e(m).smtpConfig.mail_encryption.$error,"content-loading":i.isFetchingInitialData,onInput:p[10]||(p[10]=w=>e(m).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),C("div",la,[t(B,{label:a.$t("wizard.mail.from_mail"),error:e(m).smtpConfig.from_mail.$error&&e(m).smtpConfig.from_mail.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[t(c,{modelValue:e(o).from_mail,"onUpdate:modelValue":p[11]||(p[11]=w=>e(o).from_mail=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:p[12]||(p[12]=w=>e(m).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(B,{label:a.$t("wizard.mail.from_name"),error:e(m).smtpConfig.from_name.$error&&e(m).smtpConfig.from_name.$errors[0].$message,"content-loading":i.isFetchingInitialData,required:""},{default:d(()=>[t(c,{modelValue:e(o).from_name,"onUpdate:modelValue":p[13]||(p[13]=w=>e(o).from_name=w),modelModifiers:{trim:!0},invalid:e(m).smtpConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:p[14]||(p[14]=w=>e(m).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),t(v,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(w=>[i.isSaving?E("",!0):(q(),F(_,{key:0,name:"SaveIcon",class:O(w.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(a.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,na)}}},da=["onSubmit"],ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ga={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){let u=M(!1);const r=Q(),{t:n}=G(),g=z(()=>r.mailgunConfig),o=z(()=>u.value?"text":"password");g.value.mail_driver="mailgun";const f=z(()=>({mailgunConfig:{mail_driver:{required:I.withMessage(n("validation.required"),D)},mail_mailgun_domain:{required:I.withMessage(n("validation.required"),D)},mail_mailgun_endpoint:{required:I.withMessage(n("validation.required"),D)},mail_mailgun_secret:{required:I.withMessage(n("validation.required"),D)},from_mail:{required:I.withMessage(n("validation.required"),D),email:X},from_name:{required:I.withMessage(n("validation.required"),D)}}})),l=W(f,z(()=>r));function m(){return l.value.$touch(),l.value.$invalid||V("submit-data",r.mailgunConfig),!1}function s(){l.value.mailgunConfig.mail_driver.$touch(),V("on-change-driver",r.mailgunConfig.mail_driver)}return(h,a)=>{const p=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:R(m,["prevent"])},[C("div",ua,[t($,{label:h.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(p,{modelValue:e(g).mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=v=>e(g).mail_driver=v),s],options:e(r).mail_drivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error,"content-loading":i.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(g).mail_mailgun_domain,"onUpdate:modelValue":a[1]||(a[1]=v=>e(g).mail_mailgun_domain=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:a[2]||(a[2]=v=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ma,[t($,{label:h.$t("wizard.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(g).mail_mailgun_secret,"onUpdate:modelValue":a[5]||(a[5]=v=>e(g).mail_mailgun_secret=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,type:e(o),"content-loading":i.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:a[6]||(a[6]=v=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(u)?(q(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[3]||(a[3]=v=>K(u)?u.value=!e(u):u=!e(u))})):(q(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[4]||(a[4]=v=>K(u)?u.value=!e(u):u=!e(u))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(g).mail_mailgun_endpoint,"onUpdate:modelValue":a[7]||(a[7]=v=>e(g).mail_mailgun_endpoint=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:a[8]||(a[8]=v=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ca,[t($,{label:h.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(g).from_mail,"onUpdate:modelValue":a[9]||(a[9]=v=>e(g).from_mail=v),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(l).mailgunConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,onInput:a[10]||(a[10]=v=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(g).from_name,"onUpdate:modelValue":a[11]||(a[11]=v=>e(g).from_name=v),modelModifiers:{trim:!0},invalid:e(l).mailgunConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",onInput:a[12]||(a[12]=v=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:h.loading,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(v=>[i.isSaving?E("",!0):(q(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(h.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,da)}}},pa=["onSubmit"],fa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},va={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},_a={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ba={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},$a={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G(),r=j(["tls","ssl","starttls"]);let n=M(!1);const g=Q(),o=z(()=>g.sesConfig);o.value.mail_driver="ses";const f=z(()=>({sesConfig:{mail_driver:{required:I.withMessage(u("validation.required"),D)},mail_host:{required:I.withMessage(u("validation.required"),D)},mail_port:{required:I.withMessage(u("validation.required"),D),numeric:te},mail_ses_key:{required:I.withMessage(u("validation.required"),D)},mail_ses_secret:{required:I.withMessage(u("validation.required"),D)},mail_encryption:{required:I.withMessage(u("validation.required"),D)},from_mail:{required:I.withMessage(u("validation.required"),D),email:I.withMessage(u("validation.email_incorrect"),X)},from_name:{required:I.withMessage(u("validation.required"),D)}}})),l=W(f,z(()=>g));async function m(){return l.value.$touch(),l.value.$invalid||V("submit-data",g.sesConfig),!1}function s(){l.value.sesConfig.mail_driver.$touch(),V("on-change-driver",g.sesConfig.mail_driver)}return(h,a)=>{const p=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),c=b("BaseIcon"),_=b("BaseButton");return q(),k("form",{onSubmit:R(m,["prevent"])},[C("div",fa,[t($,{label:h.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(p,{modelValue:e(o).mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=v=>e(o).mail_driver=v),s],options:e(g).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).mail_host,"onUpdate:modelValue":a[1]||(a[1]=v=>e(o).mail_host=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_host.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",onInput:a[2]||(a[2]=v=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",va,[t($,{label:h.$t("wizard.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).mail_port,"onUpdate:modelValue":a[3]||(a[3]=v=>e(o).mail_port=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_port.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",onInput:a[4]||(a[4]=v=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[t(p,{modelValue:e(o).mail_encryption,"onUpdate:modelValue":a[5]||(a[5]=v=>e(o).mail_encryption=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_encryption.$error,options:e(r),"content-loading":i.isFetchingInitialData,onInput:a[6]||(a[6]=v=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",_a,[t($,{label:h.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).from_mail,"onUpdate:modelValue":a[7]||(a[7]=v=>e(o).from_mail=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",onInput:a[8]||(a[8]=v=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).from_name,"onUpdate:modelValue":a[9]||(a[9]=v=>e(o).from_name=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:a[10]||(a[10]=v=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ba,[t($,{label:h.$t("wizard.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).mail_ses_key,"onUpdate:modelValue":a[11]||(a[11]=v=>e(o).mail_ses_key=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_key.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:a[12]||(a[12]=v=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:h.$t("wizard.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:e(o).mail_ses_secret,"onUpdate:modelValue":a[15]||(a[15]=v=>e(o).mail_ses_secret=v),modelModifiers:{trim:!0},invalid:e(l).sesConfig.mail_ses_secret.$error,type:h.getInputType,"content-loading":i.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:a[16]||(a[16]=v=>e(l).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(n)?(q(),F(c,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[13]||(a[13]=v=>K(n)?n.value=!e(n):n=!e(n))})):(q(),F(c,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:a[14]||(a[14]=v=>K(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(v=>[i.isSaving?E("",!0):(q(),F(c,{key:0,name:"SaveIcon",class:O(v.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(h.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,pa)}}},wa=["onSubmit"],ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},me={props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(i,{emit:V}){const{t:u}=G(),r=Q(),n=z(()=>r.basicMailConfig);z(()=>r.mail_drivers),n.value.mail_driver="mail";const g=z(()=>({basicMailConfig:{mail_driver:{required:I.withMessage(u("validation.required"),D)},from_mail:{required:I.withMessage(u("validation.required"),D),email:I.withMessage(u("validation.email_incorrect"),X)},from_name:{required:I.withMessage(u("validation.required"),D)}}})),o=W(g,z(()=>r));function f(){return o.value.$touch(),o.value.$invalid||V("submit-data",r.basicMailConfig),!1}function l(){var m;o.value.basicMailConfig.mail_driver.$touch(),V("on-change-driver",(m=r==null?void 0:r.basicMailConfig)==null?void 0:m.mail_driver)}return(m,s)=>{const h=b("BaseMultiselect"),a=b("BaseInputGroup"),p=b("BaseInput"),$=b("BaseIcon"),B=b("BaseButton");return q(),k("form",{onSubmit:R(f,["prevent"])},[C("div",ha,[t(a,{label:m.$t("wizard.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.mail_driver.$error&&e(o).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:e(n).mail_driver,"onUpdate:modelValue":[s[0]||(s[0]=c=>e(n).mail_driver=c),l],invalid:e(o).basicMailConfig.mail_driver.$error,options:e(r).mail_drivers,"can-deselect":!1,"content-loading":i.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ya,[t(a,{label:m.$t("wizard.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_name.$error&&e(o).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(p,{modelValue:e(n).from_name,"onUpdate:modelValue":s[1]||(s[1]=c=>e(n).from_name=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_name.$error,"content-loading":i.isFetchingInitialData,type:"text",name:"name",onInput:s[2]||(s[2]=c=>e(o).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t(a,{label:m.$t("wizard.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(o).basicMailConfig.from_mail.$error&&e(o).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(p,{modelValue:e(n).from_mail,"onUpdate:modelValue":s[3]||(s[3]=c=>e(n).from_mail=c),modelModifiers:{trim:!0},invalid:e(o).basicMailConfig.from_mail.$error,"content-loading":i.isFetchingInitialData,type:"text",onInput:s[4]||(s[4]=c=>e(o).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(B,{loading:i.isSaving,disabled:i.isSaving,"content-loading":i.isFetchingInitialData,class:"mt-4"},{left:d(c=>[i.isSaving?E("",!0):(q(),F($,{key:0,name:"SaveIcon",class:O(c.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(m.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],40,wa)}}},Ia={components:{Smtp:sa,Mailgun:ga,Ses:$a,sendmail:me,Mail:me},emits:["next"],setup(i,{emit:V}){const u=M(!1),r=M(!1),n=Q();n.mail_driver="mail",o();function g(l){n.mail_driver=l}async function o(){r.value=!0,await n.fetchMailDrivers(),r.value=!1}async function f(l){u.value=!0;let m=await n.updateMailConfig(l);u.value=!1,m.data.success&&await V("next",5)}return{mailDriverStore:n,isSaving:u,isFetchingInitialData:r,changeDriver:g,next:f}}};function qa(i,V,u,r,n,g){const o=b("BaseWizardStep");return q(),F(o,{title:i.$t("wizard.mail.mail_config"),description:i.$t("wizard.mail.mail_config_desc")},{default:d(()=>[C("form",{action:"",onSubmit:V[1]||(V[1]=R((...f)=>r.next&&r.next(...f),["prevent"]))},[(q(),F(de(r.mailDriverStore.mail_driver),{"config-data":r.mailDriverStore.mailConfigData,"is-saving":r.isSaving,"is-fetching-initial-data":r.isFetchingInitialData,onOnChangeDriver:V[0]||(V[0]=f=>r.changeDriver(f)),onSubmitData:r.next},null,8,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}const Ba=le(Ia,[["render",qa]]),Ca=["onSubmit"],Va={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Da={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Fa={emits:["next"],setup(i,{emit:V}){let u=M(!1);const r=M(!1),n=M(!1);let g=M(""),o=M(null);const f=ge(),l=ee(),{t:m}=G(),s=z(()=>f.userForm),h=z(()=>({userForm:{name:{required:I.withMessage(m("validation.required"),D)},email:{required:I.withMessage(m("validation.required"),D),email:I.withMessage(m("validation.email_incorrect"),X)},password:{required:I.withMessage(m("validation.required"),D),minLength:I.withMessage(m("validation.password_min_length",{count:8}),_e(8))},confirm_password:{required:I.withMessage(m("validation.required"),be(f.userForm.password)),sameAsPassword:I.withMessage(m("validation.password_incorrect"),$e(f.userForm.password))}}})),a=W(h,z(()=>f));function p(c,_){o.value=_}function $(){o.value=null}async function B(){if(a.value.userForm.$touch(),a.value.userForm.$invalid)return!0;u.value=!0;let c=await f.updateCurrentUser(s.value);if(u.value=!1,c.data.data){if(o.value){let v=new FormData;v.append("admin_avatar",o.value),await f.uploadAvatar(v)}const _=c.data.data.companies[0];await l.setSelectedCompany(_),V("next",6)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),x=b("EyeOffIcon"),Y=b("EyeIcon"),Z=b("BaseIcon"),H=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:c.$t("wizard.account_info"),description:c.$t("wizard.account_info_desc")},{default:d(()=>[C("form",{action:"",onSubmit:R(B,["prevent"])},[C("div",Va,[t(w,{label:c.$tc("settings.account_settings.profile_picture")},{default:d(()=>[t(v,{avatar:!0,"preview-image":e(g),onChange:p,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",Da,[t(w,{label:c.$t("wizard.name"),error:e(a).userForm.name.$error&&e(a).userForm.name.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:e(s).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(s).name=S),modelModifiers:{trim:!0},invalid:e(a).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(a).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.email"),error:e(a).userForm.email.$error&&e(a).userForm.email.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:e(s).email,"onUpdate:modelValue":_[2]||(_[2]=S=>e(s).email=S),modelModifiers:{trim:!0},invalid:e(a).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=S=>e(a).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),C("div",Sa,[t(w,{label:c.$t("wizard.password"),error:e(a).userForm.password.$error&&e(a).userForm.password.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:e(s).password,"onUpdate:modelValue":_[6]||(_[6]=S=>e(s).password=S),modelModifiers:{trim:!0},invalid:e(a).userForm.password.$error,type:r.value?"text":"password",name:"password",onInput:_[7]||(_[7]=S=>e(a).userForm.password.$touch())},{right:d(()=>[r.value?(q(),F(x,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=S=>r.value=!r.value)})):(q(),F(Y,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=S=>r.value=!r.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.confirm_password"),error:e(a).userForm.confirm_password.$error&&e(a).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:e(s).confirm_password,"onUpdate:modelValue":_[10]||(_[10]=S=>e(s).confirm_password=S),modelModifiers:{trim:!0},invalid:e(a).userForm.confirm_password.$error,type:n.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=S=>e(a).userForm.confirm_password.$touch())},{right:d(()=>[n.value?(q(),F(Z,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=S=>n.value=!n.value)})):(q(),F(Z,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=S=>n.value=!n.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),t(H,{loading:e(u),disabled:e(u),class:"mt-4"},{left:d(S=>[e(u)?E("",!0):(q(),F(Z,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ca)]),_:1},8,["title","description"])}}},Ma=["onSubmit"],za={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},ka={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Pa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Na={emits:["next"],setup(i,{emit:V}){let u=M(!1),r=M(!1);const{t:n}=G();let g=M(null),o=M(null),f=M(null);const l=j({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),m=ee(),s=pe();J(async()=>{var c;u.value=!0,await s.fetchCountries(),u.value=!1,l.address.country_id=(c=s.countries.find(_=>_.code=="US"))==null?void 0:c.id});const h={companyForm:{name:{required:I.withMessage(n("validation.required"),D)},address:{country_id:{required:I.withMessage(n("validation.required"),D)},address_street_1:{maxLength:I.withMessage(n("validation.address_maxlength",{count:255}),ue(255))},address_street_2:{maxLength:I.withMessage(n("validation.address_maxlength",{count:255}),ue(255))}}}},a=W(h,{companyForm:l});function p(c,_,v,w){f.value=w.name,o.value=_}function $(){o.value=null}async function B(){if(a.value.companyForm.$touch(),a.value.$invalid)return!0;if(r.value=!0,m.updateCompany(l)){if(o.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:f.value,data:o.value})),await m.updateCompanyLogo(_)}r.value=!1,V("next",7)}}return(c,_)=>{const v=b("BaseFileUploader"),w=b("BaseInputGroup"),y=b("BaseInput"),x=b("BaseMultiselect"),Y=b("BaseTextarea"),Z=b("BaseIcon"),H=b("BaseButton"),N=b("BaseWizardStep");return q(),F(N,{title:c.$t("wizard.company_info"),description:c.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:R(B,["prevent"])},[C("div",za,[t(w,{label:c.$tc("settings.company_info.company_logo")},{default:d(()=>[t(v,{base64:"","preview-image":e(g),onChange:p,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",ka,[t(w,{label:c.$t("wizard.company_name"),error:e(a).companyForm.name.$error&&e(a).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[t(y,{modelValue:e(l).name,"onUpdate:modelValue":_[0]||(_[0]=S=>e(l).name=S),modelModifiers:{trim:!0},invalid:e(a).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=S=>e(a).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:c.$t("wizard.country"),error:e(a).companyForm.address.country_id.$error&&e(a).companyForm.address.country_id.$errors[0].$message,"content-loading":e(u),required:""},{default:d(()=>[t(x,{modelValue:e(l).address.country_id,"onUpdate:modelValue":_[2]||(_[2]=S=>e(l).address.country_id=S),label:"name",invalid:e(a).companyForm.address.country_id.$error,options:e(s).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(u),placeholder:c.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),C("div",Ua,[t(w,{label:c.$t("wizard.state")},{default:d(()=>[t(y,{modelValue:e(l).address.state,"onUpdate:modelValue":_[3]||(_[3]=S=>e(l).address.state=S),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:c.$t("wizard.city")},{default:d(()=>[t(y,{modelValue:e(l).address.city,"onUpdate:modelValue":_[4]||(_[4]=S=>e(l).address.city=S),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),C("div",Pa,[C("div",null,[t(w,{label:c.$t("wizard.address"),error:e(a).companyForm.address.address_street_1.$error&&e(a).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[t(Y,{modelValue:e(l).address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=S=>e(l).address.address_street_1=S),modelModifiers:{trim:!0},invalid:e(a).companyForm.address.address_street_1.$error,placeholder:c.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=S=>e(a).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),t(w,{error:e(a).companyForm.address.address_street_2.$error&&e(a).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[t(Y,{modelValue:e(l).address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=S=>e(l).address.address_street_2=S),invalid:e(a).companyForm.address.address_street_2.$error,placeholder:c.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=S=>e(a).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),C("div",null,[t(w,{label:c.$t("wizard.zip_code")},{default:d(()=>[t(y,{modelValue:e(l).address.zip,"onUpdate:modelValue":_[9]||(_[9]=S=>e(l).address.zip=S),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:c.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[t(y,{modelValue:e(l).address.phone,"onUpdate:modelValue":_[10]||(_[10]=S=>e(l).address.phone=S),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),t(H,{loading:e(r),disabled:e(r),class:"mt-4"},{left:d(S=>[e(r)?E("",!0):(q(),F(Z,{key:0,name:"SaveIcon",class:O(S.class)},null,8,["class"]))]),default:d(()=>[P(" "+U(c.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],40,Ma)]),_:1},8,["title","description"])}}},Ea=["onSubmit"],Ga={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Oa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},xa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},La={emits:["next"],setup(i,{emit:V}){const u=M(!1);let r=M(!1),n=j({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:g,t:o}=G(),f=fe();r.value=!0,j([{title:g("settings.customization.invoices.allow"),value:"allow"},{title:g("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:g("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:g("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const l=ce(),m=pe(),s=ee(),h=ge(),a=se();let p={key:"fiscal_years"},$={key:"languages"};r.value=!0,Promise.all([m.fetchCurrencies(),m.fetchDateFormats(),m.fetchTimeZones(),m.fetchCountries(),m.fetchConfig(p),m.fetchConfig($)]).then(([v])=>{r.value=!1});const B=z(()=>({currentPreferences:{currency:{required:I.withMessage(o("validation.required"),D)},language:{required:I.withMessage(o("validation.required"),D)},carbon_date_format:{required:I.withMessage(o("validation.required"),D)},time_zone:{required:I.withMessage(o("validation.required"),D)},fiscal_year:{required:I.withMessage(o("validation.required"),D)}}})),c=W(B,{currentPreferences:n});async function _(){if(c.value.currentPreferences.$touch(),c.value.$invalid)return!0;l.openDialog({title:o("general.do_you_wish_to_continue"),message:o("wizard.currency_set_alert"),yesLabel:o("general.ok"),noLabel:o("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async v=>{if(v){let w={settings:{...n}};u.value=!0,delete w.settings.discount_per_item;let y=await s.updateCompanySettings({data:w});if(y.data){u.value=!1;let x={settings:{language:n.language}};(await h.updateUserSettings(x)).data&&(V("next","COMPLETED"),a.showNotification({type:"success",message:"Login Successful"}),f.push("/admin/dashboard")),we.set("auth.token",y.data.token)}return!0}return u.value=!1,!0})}return(v,w)=>{const y=b("BaseMultiselect"),x=b("BaseInputGroup"),Y=b("BaseIcon"),Z=b("BaseButton"),H=b("BaseWizardStep");return q(),F(H,{title:v.$t("wizard.preferences"),description:v.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:R(_,["prevent"])},[C("div",null,[C("div",Ga,[t(x,{label:v.$t("wizard.currency"),error:e(c).currentPreferences.currency.$error&&e(c).currentPreferences.currency.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[t(y,{modelValue:e(n).currency,"onUpdate:modelValue":w[0]||(w[0]=N=>e(n).currency=N),"content-loading":e(r),options:e(m).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:v.$tc("settings.currencies.select_currency"),invalid:e(c).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(x,{label:v.$t("settings.preferences.default_language"),error:e(c).currentPreferences.language.$error&&e(c).currentPreferences.language.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[t(y,{modelValue:e(n).language,"onUpdate:modelValue":w[1]||(w[1]=N=>e(n).language=N),"content-loading":e(r),options:e(m).languages,label:"name","value-prop":"code",placeholder:v.$tc("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(c).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",Oa,[t(x,{label:v.$t("wizard.date_format"),error:e(c).currentPreferences.carbon_date_format.$error&&e(c).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[t(y,{modelValue:e(n).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=N=>e(n).carbon_date_format=N),"content-loading":e(r),options:e(m).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:v.$tc("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(c).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(x,{label:v.$t("wizard.time_zone"),error:e(c).currentPreferences.time_zone.$error&&e(c).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[t(y,{modelValue:e(n).time_zone,"onUpdate:modelValue":w[3]||(w[3]=N=>e(n).time_zone=N),"content-loading":e(r),options:e(m).timeZones,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(c).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",xa,[t(x,{label:v.$t("wizard.fiscal_year"),error:e(c).currentPreferences.fiscal_year.$error&&e(c).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(r),required:""},{default:d(()=>[t(y,{modelValue:e(n).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=N=>e(n).fiscal_year=N),"content-loading":e(r),options:e(m).fiscalYears,label:"key","value-prop":"value",placeholder:v.$tc("settings.preferences.select_financial_year"),invalid:e(c).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),t(Z,{loading:u.value,disabled:u.value,"content-loading":e(r),class:"mt-4"},{left:d(N=>[t(Y,{name:"SaveIcon",class:O(N.class)},null,8,["class"])]),default:d(()=>[P(" "+U(v.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],40,Ea)]),_:1},8,["title","description"])}}},Wa={components:{step_1:ke,step_2:xe,step_3:Xe,step_4:ta,step_5:Ba,step_6:Fa,step_7:Na,step_8:La},setup(){let i=M("step_1"),V=M(1);const u=fe(),r=A();n();async function n(){let l=await r.fetchInstallationStep();if(l.data.profile_complete==="COMPLETED"){u.push("/admin/dashboard");return}let m=parseInt(l.data.profile_complete);m&&(V.value=m+1,i.value=`step_${m+1}`)}async function g(l){var s,h;let m={profile_complete:l};try{return await r.addInstallationStep(m),!0}catch(a){return((h=(s=a==null?void 0:a.response)==null?void 0:s.data)==null?void 0:h.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function o(l){if(l&&!await g(l))return!1;V.value++,V.value<=8&&(i.value="step_"+V.value)}function f(l){}return{stepComponent:i,currentStepNumber:V,onStepChange:o,saveStepProgress:g,onNavClick:f}}},Ra={class:"flex flex-col items-center justify-between w-full pt-10"};function Ta(i,V,u,r,n,g){const o=b("BaseWizard");return q(),k("div",Ra,[t(o,{steps:7,"current-step":r.currentStepNumber,onClick:r.onNavClick},{default:d(()=>[(q(),F(de(r.stepComponent),{onNext:r.onStepChange},null,8,["onNext"]))]),_:1},8,["current-step","onClick"])])}const Ya=le(Wa,[["render",Ta]]);export{Ya as default};
