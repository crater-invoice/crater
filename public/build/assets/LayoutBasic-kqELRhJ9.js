import{x as z,y as be,z as ee,A as xe,B as le,C as we,D as $e,e as X,E as H,F as J,G,v as Y,f as S,H as ke,k as D,g as j,h as W,I as Ce,j as ie,r as b,o as s,m as C,w as i,b as l,p as A,t as f,l as e,a as t,q as te,c as _,J as N,K as B,L as K,M as ae,N as U,O as L,T as ce,P as Se,S as Be,d as Ie,_ as ue,Q as T,R as Ee,U as Q,V as Ae,W as Me,u as Ue,X as Ve,Y as Le}from"./main-pPEsZPea.js";import{u as de}from"./exchange-rate-Md-8fXjz.js";import{u as Re}from"./users-bFFtYbqz.js";import{N as Fe}from"./NotificationRoot-3GhaCSMI.js";import{V as Te}from"./index-M4eah3LL.js";function q(w){var c;const n=le(w);return(c=n==null?void 0:n.$el)!=null?c:n}const me=$e?window:void 0;function Z(...w){let c,n,o,y;if(typeof w[0]=="string"||Array.isArray(w[0])?([n,o,y]=w,c=me):[c,n,o,y]=w,!c)return z;Array.isArray(n)||(n=[n]),Array.isArray(o)||(o=[o]);const h=[],g=()=>{h.forEach(v=>v()),h.length=0},x=(v,r,m,p)=>(v.addEventListener(r,m,p),()=>v.removeEventListener(r,m,p)),d=ee(()=>[q(c),le(y)],([v,r])=>{if(g(),!v)return;const m=xe(r)?{...r}:r;h.push(...n.flatMap(p=>o.map(a=>x(v,p,a,m))))},{immediate:!0,flush:"post"}),u=()=>{d(),g()};return we(u),u}let re=!1;function pe(w,c,n={}){const{window:o=me,ignore:y=[],capture:h=!0,detectIframe:g=!1}=n;if(!o)return z;be&&!re&&(re=!0,Array.from(o.document.body.children).forEach(m=>m.addEventListener("click",z)),o.document.documentElement.addEventListener("click",z));let x=!0;const d=m=>y.some(p=>{if(typeof p=="string")return Array.from(o.document.querySelectorAll(p)).some(a=>a===m.target||m.composedPath().includes(a));{const a=q(p);return a&&(m.target===a||m.composedPath().includes(a))}}),v=[Z(o,"click",m=>{const p=q(w);if(!(!p||p===m.target||m.composedPath().includes(p))){if(m.detail===0&&(x=!d(m)),!x){x=!0;return}c(m)}},{passive:!0,capture:h}),Z(o,"pointerdown",m=>{const p=q(w);x=!d(m)&&!!(p&&!m.composedPath().includes(p))},{passive:!0}),g&&Z(o,"blur",m=>{setTimeout(()=>{var p;const a=q(w);((p=o.document.activeElement)==null?void 0:p.tagName)==="IFRAME"&&!(a!=null&&a.contains(o.document.activeElement))&&c(m)},0)})].filter(Boolean);return()=>v.forEach(m=>m())}const Ne={class:"flex justify-between w-full"},je={class:"p-4 mb-16 sm:p-6 space-y-4"},Oe={key:1,class:"flex flex-col items-center"},qe={class:"z-0 flex justify-end p-4 bg-gray-50 border-modal-bg"},De={__name:"CompanyModal",setup(w){const c=X(),n=H(),o=J(),y=G(),{t:h}=Y.useI18n();let g=S(!1),x=S(null),d=S(!1),u=S(null),v=S(null);const r=ke({name:null,currency:"",address:{country_id:null}}),m=D(()=>o.active&&o.componentName==="CompanyModal"),p={newCompanyForm:{name:{required:j.withMessage(h("validation.required"),W),minLength:j.withMessage(h("validation.name_min_length",{count:3}),Ce(3))},address:{country_id:{required:j.withMessage(h("validation.required"),W)}},currency:{required:j.withMessage(h("validation.required"),W)}}},a=ie(p,{newCompanyForm:r});async function $(){d.value=!0,await y.fetchCurrencies(),await y.fetchCountries(),r.currency=n.selectedCompanyCurrency.id,r.address.country_id=n.selectedCompany.address.country_id,d.value=!1}function M(I,E){v.value=I,u.value=E}function k(){v.value=null,u.value=null}async function O(){if(a.value.newCompanyForm.$touch(),a.value.$invalid)return!0;g.value=!0;try{const I=await n.addNewCompany(r);if(I.data.data){if(await n.setSelectedCompany(I.data.data),u&&u.value){let E=new FormData;E.append("company_logo",JSON.stringify({name:v.value,data:u.value})),await n.updateCompanyLogo(E),c.push("/admin/dashboard")}await y.setIsAppLoaded(!1),await y.bootstrap(),F()}g.value=!1}catch{g.value=!1}}function R(){r.name="",r.currency="",r.address.country_id="",a.value.$reset()}function F(){o.closeModal(),setTimeout(()=>{R(),a.value.$reset()},300)}return(I,E)=>{const ne=b("BaseIcon"),_e=b("BaseContentPlaceholdersBox"),he=b("BaseContentPlaceholders"),ye=b("BaseFileUploader"),P=b("BaseInputGroup"),fe=b("BaseInput"),oe=b("BaseMultiselect"),ge=b("BaseInputGrid"),se=b("BaseButton"),ve=b("BaseModal");return s(),C(ve,{show:m.value,onClose:F,onOpen:$},{header:i(()=>[l("div",Ne,[A(f(e(o).title)+" ",1),t(ne,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:F})])]),default:i(()=>[l("form",{action:"",onSubmit:te(O,["prevent"])},[l("div",je,[t(ge,{layout:"one-column"},{default:i(()=>[t(P,{"content-loading":e(d),label:I.$t("settings.company_info.company_logo")},{default:i(()=>[e(d)?(s(),C(he,{key:0},{default:i(()=>[t(_e,{rounded:!0,class:"w-full h-24"})]),_:1})):(s(),_("div",Oe,[t(ye,{"preview-image":e(x),base64:"",onRemove:k,onChange:M},null,8,["preview-image"])]))]),_:1},8,["content-loading","label"]),t(P,{label:I.$t("settings.company_info.company_name"),error:e(a).newCompanyForm.name.$error&&e(a).newCompanyForm.name.$errors[0].$message,"content-loading":e(d),required:""},{default:i(()=>[t(fe,{modelValue:r.name,"onUpdate:modelValue":E[0]||(E[0]=V=>r.name=V),invalid:e(a).newCompanyForm.name.$error,"content-loading":e(d),onInput:E[1]||(E[1]=V=>e(a).newCompanyForm.name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(P,{"content-loading":e(d),label:I.$t("settings.company_info.country"),error:e(a).newCompanyForm.address.country_id.$error&&e(a).newCompanyForm.address.country_id.$errors[0].$message,required:""},{default:i(()=>[t(oe,{modelValue:r.address.country_id,"onUpdate:modelValue":E[2]||(E[2]=V=>r.address.country_id=V),"content-loading":e(d),label:"name",invalid:e(a).newCompanyForm.address.country_id.$error,options:e(y).countries,"value-prop":"id","can-deselect":!0,"can-clear":!1,searchable:"","track-by":"name"},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["content-loading","label","error"]),t(P,{label:I.$t("wizard.currency"),error:e(a).newCompanyForm.currency.$error&&e(a).newCompanyForm.currency.$errors[0].$message,"content-loading":e(d),"help-text":I.$t("wizard.currency_set_alert"),required:""},{default:i(()=>[t(oe,{modelValue:r.currency,"onUpdate:modelValue":E[3]||(E[3]=V=>r.currency=V),"content-loading":e(d),options:e(y).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:I.$t("settings.currencies.select_currency"),invalid:e(a).newCompanyForm.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading","help-text"])]),_:1})]),l("div",qe,[t(se,{class:"mr-3 text-sm",variant:"primary-outline",outline:"",type:"button",onClick:F},{default:i(()=>[A(f(I.$t("general.cancel")),1)]),_:1}),t(se,{loading:e(g),disabled:e(g),variant:"primary",type:"submit"},{left:i(V=>[e(g)?B("",!0):(s(),C(ne,{key:0,name:"SaveIcon",class:N(V.class)},null,8,["class"]))]),default:i(()=>[A(" "+f(I.$t("general.save")),1)]),_:1},8,["loading","disabled"])])],32)]),_:1},8,["show"])}}},Ge={key:0,class:"w-16 text-sm font-medium truncate sm:w-auto"},Pe={key:0,class:"absolute right-0 mt-2 bg-white rounded-md shadow-lg"},ze={class:"overflow-y-auto scrollbar-thin scrollbar-thumb-rounded-full w-[250px] max-h-[350px] scrollbar-thumb-gray-300 scrollbar-track-gray-10 pb-4"},We={class:"px-3 py-2 text-xs font-semibold text-gray-400 mb-0.5 block uppercase"},Xe={key:0,class:"flex flex-col items-center justify-center p-2 px-3 mt-4 text-base text-gray-400"},He={key:1},Je={key:0},Ye=["onClick"],Ke={class:"flex items-center"},Qe={class:"flex items-center justify-center mr-3 overflow-hidden text-base font-semibold bg-gray-200 rounded-md w-9 h-9 text-primary-500"},Ze={key:0},et=["src"],tt={class:"flex flex-col"},at={class:"text-sm"},nt={class:"font-medium"},ot={__name:"CompanySwitcher",setup(w){const c=H(),n=J(),o=K(),y=X(),h=G(),{t:g}=Y.useI18n(),x=ae(),d=S(!1),u=S(""),v=S(null);ee(o,()=>{d.value=!1,u.value=""}),pe(v,()=>{d.value=!1});function r(a){if(a)return a.split(" ")[0].charAt(0).toUpperCase()}function m(){n.openModal({title:g("company_switcher.new_company"),componentName:"CompanyModal",size:"sm"})}async function p(a){await c.setSelectedCompany(a),y.push("/admin/dashboard"),await h.setIsAppLoaded(!1),await h.bootstrap()}return(a,$)=>{const M=b("BaseIcon");return s(),_("div",{ref_key:"companySwitchBar",ref:v,class:"relative rounded"},[t(De),l("div",{class:"flex items-center justify-center px-3 h-8 md:h-9 ml-2 text-sm text-white bg-white rounded cursor-pointer bg-opacity-20",onClick:$[0]||($[0]=k=>d.value=!d.value)},[e(c).selectedCompany?(s(),_("span",Ge,f(e(c).selectedCompany.name),1)):B("",!0),t(M,{name:"ChevronDownIcon",class:"h-5 ml-1 text-white"})]),t(ce,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:i(()=>[d.value?(s(),_("div",Pe,[l("div",ze,[l("label",We,f(a.$t("company_switcher.label")),1),e(c).companies.length<1?(s(),_("div",Xe,[t(M,{name:"ExclamationCircleIcon",class:"h-5 text-gray-400"}),A(" "+f(a.$t("company_switcher.no_results_found")),1)])):(s(),_("div",He,[e(c).companies.length>0?(s(),_("div",Je,[(s(!0),_(U,null,L(e(c).companies,(k,O)=>(s(),_("div",{key:O,class:N(["p-2 px-3 rounded-md cursor-pointer hover:bg-gray-100 hover:text-primary-500",{"bg-gray-100 text-primary-500":e(c).selectedCompany.id===k.id}]),onClick:R=>p(k)},[l("div",Ke,[l("span",Qe,[k.logo?(s(),_("img",{key:1,src:k.logo,alt:"Company logo",class:"w-full h-full object-contain"},null,8,et)):(s(),_("span",Ze,f(r(k.name)),1))]),l("div",tt,[l("span",at,f(k.name),1)])])],10,Ye))),128))])):B("",!0)]))]),e(x).currentUser.is_owner?(s(),_("div",{key:0,class:"flex items-center justify-center p-4 pl-3 border-t-2 border-gray-100 cursor-pointer text-primary-400 hover:text-primary-500",onClick:m},[t(M,{name:"PlusIcon",class:"h-5 mr-2"}),l("span",nt,f(a.$t("company_switcher.add_new_company")),1)])):B("",!0)])):B("",!0)]),_:1})],512)}}},st={key:0,class:"scrollbar-thin scrollbar-thumb-rounded-full scrollbar-thumb-gray-300 scrollbar-track-gray-100 overflow-y-auto bg-white rounded-md mt-2 shadow-lg p-3 absolute w-[300px] h-[200px] right-0"},rt={key:0,class:"flex items-center justify-center text-gray-400 text-base flex-col mt-4"},lt={key:1},it={key:0},ct={class:"text-sm text-gray-400 mb-0.5 block px-2 uppercase"},ut={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},dt={class:"flex flex-col"},mt={class:"text-sm"},pt={key:0,class:"text-xs text-gray-400"},_t={key:1,class:"text-xs text-gray-400"},ht={key:1,class:"mt-2"},yt={class:"text-sm text-gray-400 mb-2 block px-2 mb-0.5 uppercase"},ft={class:"flex items-center justify-center w-9 h-9 mr-3 text-base font-semibold bg-gray-200 rounded-full text-primary-500"},gt={class:"flex flex-col"},vt={class:"text-sm"},bt={class:"text-xs text-gray-400"},xt={__name:"GlobalSearchBar",setup(w){const c=Re(),n=S(!1),o=S(""),y=S(null),h=S(!1),g=K();ee(g,()=>{n.value=!1,o.value=""}),x=Se.debounce(x,500),pe(y,()=>{n.value=!1,o.value=""});function x(){let u={search:o.value};o.value&&(h.value=!0,c.searchUsers(u).then(()=>{n.value=!0}),h.value=!1),o.value===""&&(n.value=!1)}function d(u){if(u)return u.split(" ")[0].charAt(0).toUpperCase()}return(u,v)=>{const r=b("BaseIcon"),m=b("BaseInput"),p=b("router-link");return s(),_("div",{ref_key:"searchBar",ref:y,class:"hidden rounded md:block relative"},[l("div",null,[t(m,{modelValue:o.value,"onUpdate:modelValue":v[0]||(v[0]=a=>o.value=a),placeholder:"Search...","container-class":"!rounded",class:"h-8 md:h-9 !rounded",onInput:x},{left:i(()=>[t(r,{name:"SearchIcon",class:"text-gray-400"})]),right:i(()=>[h.value?(s(),C(Be,{key:0,class:"h-5 text-primary-500"})):B("",!0)]),_:1},8,["modelValue"])]),t(ce,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:i(()=>[n.value?(s(),_("div",st,[e(c).userList.length<1&&e(c).customerList.length<1?(s(),_("div",rt,[t(r,{name:"ExclamationCircleIcon",class:"text-gray-400"}),A(" "+f(u.$t("global_search.no_results_found")),1)])):(s(),_("div",lt,[e(c).customerList.length>0?(s(),_("div",it,[l("label",ct,f(u.$t("global_search.customers")),1),(s(!0),_(U,null,L(e(c).customerList,(a,$)=>(s(),_("div",{key:$,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(p,{to:{path:`/admin/customers/${a.id}/view`},class:"flex items-center"},{default:i(()=>[l("span",ut,f(d(a.name)),1),l("div",dt,[l("span",mt,f(a.name),1),a.contact_name?(s(),_("span",pt,f(a.contact_name),1)):(s(),_("span",_t,f(a.email),1))])]),_:2},1032,["to"])]))),128))])):B("",!0),e(c).userList.length>0?(s(),_("div",ht,[l("label",yt,f(u.$t("global_search.users")),1),(s(!0),_(U,null,L(e(c).userList,(a,$)=>(s(),_("div",{key:$,class:"p-2 hover:bg-gray-100 cursor-pointer rounded-md"},[t(p,{to:{path:`/admin/users/${a.id}/edit`},class:"flex items-center"},{default:i(()=>[l("span",ft,f(d(a.name)),1),l("div",gt,[l("span",vt,f(a.name),1),l("span",bt,f(a.email),1)])]),_:2},1032,["to"])]))),128))])):B("",!0)]))])):B("",!0)]),_:1})],512)}}},wt={class:"fixed top-0 left-0 z-20 flex items-center justify-between w-full px-4 py-3 md:h-16 md:px-8 bg-gradient-to-r from-primary-500 to-primary-400"},$t=["src"],kt={class:"flex float-right h-8 m-0 list-none md:h-9"},Ct={key:0,class:"relative hidden float-left m-0 md:block"},St={class:"flex items-center justify-center w-8 h-8 ml-2 text-sm text-black bg-white rounded md:h-9 md:w-9"},Bt={class:"ml-2"},It={class:"relative block float-left ml-2"},Et=["src"],At={__name:"TheSiteHeader",setup(w){const c=Ie(),n=ae(),o=G(),y=X(),h=D(()=>n.currentUser&&n.currentUser.avatar!==0?n.currentUser.avatar:x()),g=D(()=>o.globalSettings.admin_portal_logo?"/storage/"+o.globalSettings.admin_portal_logo:!1);function x(){return new URL("/build/assets/default-avatar-4j3-l2sn.jpg",import.meta.url)}function d(){return n.hasAbilities([T.CREATE_INVOICE,T.CREATE_ESTIMATE,T.CREATE_CUSTOMER])}async function u(){await c.logout(),y.push("/login")}function v(){o.setSidebarVisibility(!0)}return(r,m)=>{const p=b("router-link"),a=b("BaseIcon"),$=b("BaseDropdownItem"),M=b("BaseDropdown");return s(),_("header",wt,[t(p,{to:"/admin/dashboard",class:"float-none text-lg not-italic font-black tracking-wider text-white brand-main md:float-left font-base hidden md:block"},{default:i(()=>[g.value?(s(),_("img",{key:0,src:g.value,class:"h-6"},null,8,$t)):(s(),C(ue,{key:1,class:"h-6","light-color":"white","dark-color":"white"}))]),_:1}),l("div",{class:N([{"is-active":e(o).isSidebarOpen},"flex float-left p-1 overflow-visible text-sm ease-linear bg-white border-0 rounded cursor-pointer md:hidden md:ml-0 hover:bg-gray-100"]),onClick:te(v,["prevent"])},[t(a,{name:"MenuIcon",class:"!w-6 !h-6 text-gray-500"})],2),l("ul",kt,[d?(s(),_("li",Ct,[t(M,{"width-class":"w-48"},{activator:i(()=>[l("div",St,[t(a,{name:"PlusIcon",class:"w-5 h-5 text-gray-600"})])]),default:i(()=>[t(p,{to:"/admin/invoices/create"},{default:i(()=>[e(n).hasAbilities(e(T).CREATE_INVOICE)?(s(),C($,{key:0},{default:i(()=>[t(a,{name:"DocumentTextIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),A(" "+f(r.$t("invoices.new_invoice")),1)]),_:1})):B("",!0)]),_:1}),t(p,{to:"/admin/estimates/create"},{default:i(()=>[e(n).hasAbilities(e(T).CREATE_ESTIMATE)?(s(),C($,{key:0},{default:i(()=>[t(a,{name:"DocumentIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),A(" "+f(r.$t("estimates.new_estimate")),1)]),_:1})):B("",!0)]),_:1}),t(p,{to:"/admin/customers/create"},{default:i(()=>[e(n).hasAbilities(e(T).CREATE_CUSTOMER)?(s(),C($,{key:0},{default:i(()=>[t(a,{name:"UserIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),A(" "+f(r.$t("customers.new_customer")),1)]),_:1})):B("",!0)]),_:1})]),_:1})])):B("",!0),l("li",Bt,[e(n).currentUser.is_owner||e(n).hasAbilities(e(T).VIEW_CUSTOMER)?(s(),C(xt,{key:0})):B("",!0)]),l("li",null,[t(ot)]),l("li",It,[t(M,{"width-class":"w-48"},{activator:i(()=>[l("img",{src:h.value,class:"block w-8 h-8 rounded md:h-9 md:w-9 object-cover"},null,8,Et)]),default:i(()=>[t(p,{to:"/admin/settings/account-settings"},{default:i(()=>[t($,null,{default:i(()=>[t(a,{name:"CogIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),A(" "+f(r.$t("navigation.settings")),1)]),_:1})]),_:1}),t($,{onClick:u},{default:i(()=>[t(a,{name:"LogoutIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500","aria-hidden":"true"}),A(" "+f(r.$t("navigation.logout")),1)]),_:1})]),_:1})])])])}}},Mt={class:"relative flex flex-col flex-1 w-full max-w-xs bg-white"},Ut={class:"absolute top-0 right-0 pt-2 -mr-12"},Vt=l("span",{class:"sr-only"},"Close sidebar",-1),Lt={class:"flex-1 h-0 pt-5 pb-4 overflow-y-auto"},Rt={class:"flex items-center shrink-0 px-4 mb-10"},Ft=l("div",{class:"shrink-0 w-14"},null,-1),Tt={class:"hidden w-56 h-screen pb-32 overflow-y-auto bg-white border-r border-gray-200 border-solid xl:w-64 md:fixed md:flex md:flex-col md:inset-y-0 pt-16"},Nt={__name:"TheSiteSidebar",setup(w){const c=K(),n=G();function o(y){return c.path.indexOf(y)>-1}return(y,h)=>{const g=b("BaseIcon"),x=b("router-link");return s(),_(U,null,[t(e(Me),{as:"template",show:e(n).isSidebarOpen},{default:i(()=>[t(e(Ee),{as:"div",class:"fixed inset-0 z-40 flex md:hidden",onClose:h[3]||(h[3]=d=>e(n).setSidebarVisibility(!1))},{default:i(()=>[t(e(Q),{as:"template",enter:"transition-opacity ease-linear duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"transition-opacity ease-linear duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[t(e(Ae),{class:"fixed inset-0 bg-gray-600 bg-opacity-75"})]),_:1}),t(e(Q),{as:"template",enter:"transition ease-in-out duration-300","enter-from":"-translate-x-full","enter-to":"translate-x-0",leave:"transition ease-in-out duration-300","leave-from":"translate-x-0","leave-to":"-translate-x-full"},{default:i(()=>[l("div",Mt,[t(e(Q),{as:"template",enter:"ease-in-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in-out duration-300","leave-from":"opacity-100","leave-to":"opacity-0"},{default:i(()=>[l("div",Ut,[l("button",{class:"flex items-center justify-center w-10 h-10 ml-1 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white",onClick:h[0]||(h[0]=d=>e(n).setSidebarVisibility(!1))},[Vt,t(g,{name:"XIcon",class:"w-6 h-6 text-white","aria-hidden":"true"})])])]),_:1}),l("div",Lt,[l("div",Rt,[t(ue,{class:"block h-auto max-w-full w-36 text-primary-400",alt:"InvoiceShelf Logo"})]),(s(!0),_(U,null,L(e(n).menuGroups,d=>(s(),_("nav",{key:d,class:"mt-5 space-y-1"},[(s(!0),_(U,null,L(d,u=>(s(),C(x,{key:u.name,to:u.link,class:N([o(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-4 py-3 border-transparent flex items-center border-l-4 border-solid text-sm not-italic font-medium"]),onClick:h[2]||(h[2]=v=>e(n).setSidebarVisibility(!1))},{default:i(()=>[t(g,{name:u.icon,class:N([o(u.link)?"text-primary-500 ":"text-gray-400","mr-4 shrink-0 h-5 w-5"]),onClick:h[1]||(h[1]=v=>e(n).setSidebarVisibility(!1))},null,8,["name","class"]),A(" "+f(y.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])])]),_:1}),Ft]),_:1})]),_:1},8,["show"]),l("div",Tt,[(s(!0),_(U,null,L(e(n).menuGroups,d=>(s(),_("div",{key:d,class:"p-0 m-0 mt-6 list-none"},[(s(!0),_(U,null,L(d,u=>(s(),C(x,{key:u,to:u.link,class:N([o(u.link)?"text-primary-500 border-primary-500 bg-gray-100 ":"text-black","cursor-pointer px-0 pl-6 hover:bg-gray-50 py-3 group flex items-center border-l-4 border-solid border-transparent text-sm not-italic font-medium"])},{default:i(()=>[t(g,{name:u.icon,class:N([o(u.link)?"text-primary-500 group-hover:text-primary-500 ":"text-gray-400 group-hover:text-black","mr-4 shrink-0 h-5 w-5 "])},null,8,["name","class"]),A(" "+f(y.$t(u.title)),1)]),_:2},1032,["to","class"]))),128))]))),128))])],64)}}},jt={class:"font-medium text-lg text-left"},Ot={class:"mt-2 text-sm leading-snug text-gray-500",style:{"max-width":"680px"}},qt={class:"text-gray-500 sm:text-sm"},Dt={class:"text-gray-400 text-xs mt-2 font-light"},Gt={slot:"footer",class:"z-0 flex justify-end mt-4 pt-4 border-t border-gray-200 border-solid border-modal-bg"},Pt={__name:"ExchangeRateBulkUpdate",emits:["update"],setup(w,{emit:c}){const n=de();Ue();const o=H(),{t:y,tm:h}=Y.useI18n();let g=S(!1);S(!1);const x={exchange_rate:{required:j.withMessage(y("validation.required"),W),decimal:j.withMessage(y("validation.valid_exchange_rate"),Ve)}},d=ie(),u=c;async function v(){if(d.value.$touch(),d.value.$invalid)return!0;g.value=!0;let r=n.bulkCurrencies.map(p=>({id:p.id,exchange_rate:p.exchange_rate})),m=await n.updateBulkExchangeRate({currencies:r});m.data.success&&u("update",m.data.success),g.value=!1}return(r,m)=>{const p=b("BaseInput"),a=b("BaseInputGroup"),$=b("BaseButton"),M=b("BaseCard");return s(),C(M,null,{default:i(()=>[l("h6",jt,f(r.$t("settings.exchange_rate.title")),1),l("p",Ot,f(r.$t("settings.exchange_rate.description",{currency:e(o).selectedCompanyCurrency.name})),1),l("form",{action:"",onSubmit:te(v,["prevent"])},[(s(!0),_(U,null,L(e(n).bulkCurrencies,(k,O)=>(s(),C(e(Te),{key:O,state:k,rules:x},{default:i(({v:R})=>[t(a,{class:"my-5",label:`${k.code} to ${e(o).selectedCompanyCurrency.code}`,error:R.exchange_rate.$error&&R.exchange_rate.$errors[0].$message,required:""},{default:i(()=>[t(p,{modelValue:k.exchange_rate,"onUpdate:modelValue":F=>k.exchange_rate=F,addon:`1 ${k.code} =`,invalid:R.exchange_rate.$error,onInput:F=>R.exchange_rate.$touch()},{right:i(()=>[l("span",qt,f(e(o).selectedCompanyCurrency.code),1)]),_:2},1032,["modelValue","onUpdate:modelValue","addon","invalid","onInput"]),l("span",Dt,f(r.$t("settings.exchange_rate.exchange_help_text",{currency:k.code,baseCurrency:e(o).selectedCompanyCurrency.code})),1)]),_:2},1032,["label","error"])]),_:2},1032,["state"]))),128)),l("div",Gt,[t($,{loading:e(g),variant:"primary",type:"submit"},{default:i(()=>[A(f(r.$t("general.save")),1)]),_:1},8,["loading"])])],32)]),_:1})}}},zt={__name:"ExchangeRateBulkUpdateModal",setup(w){const c=J(),n=D(()=>c.active&&c.componentName==="ExchangeRateBulkUpdateModal");function o(){c.closeModal()}return(y,h)=>{const g=b("BaseModal");return s(),C(g,{show:n.value},{default:i(()=>[t(Pt,{onUpdate:h[0]||(h[0]=x=>o())})]),_:1},8,["show"])}}},Wt={key:0,class:"h-full"},Xt={class:"h-screen h-screen-ios overflow-y-auto md:pl-56 xl:pl-64 min-h-0"},Ht={class:"pt-16 pb-16"},ea={__name:"LayoutBasic",setup(w){const c=G(),n=K(),o=ae(),y=X(),h=J();Y.useI18n();const g=de(),x=H(),d=D(()=>c.isAppLoaded);return Le(()=>{c.bootstrap().then(u=>{n.meta.ability&&!o.hasAbilities(n.meta.ability)?y.push({name:"account.settings"}):n.meta.isOwner&&!o.currentUser.is_owner&&y.push({name:"account.settings"}),u.data.current_company_settings.bulk_exchange_rate_configured==="NO"&&g.fetchBulkCurrencies().then(v=>{if(v.data.currencies.length)h.openModal({componentName:"ExchangeRateBulkUpdateModal",size:"sm"});else{let r={settings:{bulk_exchange_rate_configured:"YES"}};x.updateCompanySettings({data:r})}})})}),(u,v)=>{const r=b("router-view"),m=b("BaseGlobalLoader");return d.value?(s(),_("div",Wt,[t(Fe),t(At),t(Nt),t(zt),l("main",Xt,[l("div",Ht,[t(r)])])])):(s(),C(m,{key:1}))}}};export{ea as default};
