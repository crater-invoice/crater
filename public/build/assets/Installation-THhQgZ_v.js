import{a4 as _e,E as ae,s as W,a1 as j,f as z,k,r as b,o as q,m as M,w as d,b as C,c as U,t as P,p as N,K as G,N as ie,O as oe,a as t,J as x,v as O,a7 as ge,Y as Q,l as e,ac as le,ad as re,H as A,a5 as te,g as y,h as V,ar as ne,j as R,q as T,Z as se,u as de,a3 as ue,i as X,n as K,M as ve,I as be,ag as $e,a0 as we,G as pe,ai as me,e as fe,aS as he}from"./main-pPEsZPea.js";import{u as ee}from"./mail-driver-SNHZXvKB.js";const Y=(o=!1)=>{const S=o?window.pinia.defineStore:_e,D=ae();return S({id:"installation",state:()=>({currentDataBaseData:{database_connection:"mysql",database_hostname:"127.0.0.1",database_port:"3306",database_name:null,database_username:null,database_password:null,app_url:window.location.origin}}),actions:{fetchInstallationRequirements(){return new Promise((n,s)=>{W.get("/api/v1/installation/requirements").then(a=>{n(a)}).catch(a=>{j(a),s(a)})})},fetchInstallationStep(){return new Promise((n,s)=>{W.get("/api/v1/installation/wizard-step").then(a=>{n(a)}).catch(a=>{j(a),s(a)})})},addInstallationStep(n){return new Promise((s,a)=>{W.post("/api/v1/installation/wizard-step",n).then(p=>{s(p)}).catch(p=>{j(p),a(p)})})},fetchInstallationPermissions(){return new Promise((n,s)=>{W.get("/api/v1/installation/permissions").then(a=>{n(a)}).catch(a=>{j(a),s(a)})})},fetchInstallationDatabase(n){return new Promise((s,a)=>{W.get("/api/v1/installation/database/config",{params:n}).then(p=>{s(p)}).catch(p=>{j(p),a(p)})})},addInstallationDatabase(n){return new Promise((s,a)=>{W.post("/api/v1/installation/database/config",n).then(p=>{s(p)}).catch(p=>{j(p),a(p)})})},addInstallationFinish(){return new Promise((n,s)=>{W.post("/api/v1/installation/finish").then(a=>{n(a)}).catch(a=>{j(a),s(a)})})},setInstallationDomain(n){return new Promise((s,a)=>{W.put("/api/v1/installation/set-domain",n).then(p=>{s(p)}).catch(p=>{j(p),a(p)})})},installationLogin(){return new Promise((n,s)=>{W.get("/sanctum/csrf-cookie").then(a=>{a&&W.post("/api/v1/installation/login").then(p=>{D.setSelectedCompany(p.data.company),n(p)}).catch(p=>{j(p),s(p)})})})},checkAutheticated(){return new Promise((n,s)=>{W.get("/api/v1/auth/check").then(a=>{n(a)}).catch(a=>{s(a)})})}}})()},ye={class:"w-full md:w-2/3"},Ie={class:"mb-6"},qe={key:0,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},Be={class:"col-span-2 text-sm"},Ce={class:"text-right"},Ve={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},De={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Se={key:1},Fe={class:"col-span-2 text-sm"},Me={class:"text-right"},ze={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 bg-green-500 rounded-full"},ke={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 bg-red-500 rounded-full"},Ue={__name:"Step1RequirementsCheck",emits:["next"],setup(o,{emit:S}){const D=S,n=z(""),s=z(""),a=z(!1);z(!0);const p=Y(),m=k(()=>{if(n.value){let c=!0;for(const l in n.value)return n.value[l]||(c=!1),n.value&&s.value.supported&&c}return!1});async function v(){var l,I,i,g;a.value=!0;const c=await p.fetchInstallationRequirements();c.data&&(n.value=(i=(I=(l=c==null?void 0:c.data)==null?void 0:l.requirements)==null?void 0:I.requirements)==null?void 0:i.php,s.value=(g=c==null?void 0:c.data)==null?void 0:g.phpSupportInfo)}function r(){a.value=!0,D("next"),a.value=!1}return(c,l)=>{const I=b("BaseIcon"),i=b("BaseButton"),g=b("BaseWizardStep");return q(),M(g,{title:c.$t("wizard.req.system_req"),description:c.$t("wizard.req.system_req_desc")},{default:d(()=>[C("div",ye,[C("div",Ie,[s.value?(q(),U("div",qe,[C("div",Be,P(c.$t("wizard.req.php_req_version",{version:s.value.minimum})),1),C("div",Ce,[N(P(s.value.current)+" ",1),s.value.supported?(q(),U("span",Ve)):(q(),U("span",De))])])):G("",!0),n.value?(q(),U("div",Se,[(q(!0),U(ie,null,oe(n.value,($,B)=>(q(),U("div",{key:B,class:"grid grid-flow-row grid-cols-3 p-3 border border-gray-200 lg:gap-24 sm:gap-4"},[C("div",Fe,P(B),1),C("div",Me,[$?(q(),U("span",ze)):(q(),U("span",ke))])]))),128))])):G("",!0)]),m.value?(q(),M(i,{key:0,onClick:r},{left:d($=>[t(I,{name:"ArrowRightIcon",class:x($.class)},null,8,["class"])]),default:d(()=>[N(P(c.$t("wizard.continue"))+" ",1)]),_:1})):G("",!0),n.value?G("",!0):(q(),M(i,{key:1,loading:a.value,disabled:a.value,onClick:v},{default:d(()=>[N(P(c.$t("wizard.req.check_req")),1)]),_:1},8,["loading","disabled"]))])]),_:1},8,["title","description"])}}},Pe={key:1,class:"relative"},Ne={class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4"},Ee={class:"col-span-2 p-3"},Ge={class:"p-3 text-right"},Oe={key:0,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-green-500"},xe={key:1,class:"inline-block w-4 h-4 ml-3 mr-2 rounded-full bg-red-500"},Le={__name:"Step2PermissionCheck",emits:["next"],setup(o,{emit:S}){const D=S;let n=z(!1),s=z(!1),a=z([]);const{tm:p,t:m}=O.useI18n(),v=Y(),r=ge();Q(()=>{c()});async function c(){n.value=!0;const I=await v.fetchInstallationPermissions();a.value=I.data.permissions.permissions,I.data&&I.data.permissions.errors&&setTimeout(()=>{r.openDialog({title:p("wizard.permissions.permission_confirm_title"),message:m("wizard.permissions.permission_confirm_desc"),yesLabel:"OK",noLabel:"Cancel",variant:"danger",hideNoButton:!1,size:"lg"}).then(i=>{i.data&&(n.value=!1)})},500),n.value=!1}function l(){s.value=!0,D("next"),s.value=!1}return(I,i)=>{const g=b("BaseContentPlaceholdersText"),$=b("BaseContentPlaceholdersBox"),B=b("BaseContentPlaceholders"),u=b("BaseIcon"),_=b("BaseButton"),f=b("BaseWizardStep");return q(),M(f,{title:I.$t("wizard.permissions.permissions"),description:I.$t("wizard.permissions.permission_desc")},{default:d(()=>[e(n)?(q(),M(B,{key:0},{default:d(()=>[(q(),U(ie,null,oe(3,(w,h)=>C("div",{key:h,class:"grid grid-flow-row grid-cols-3 lg:gap-24 sm:gap-4 border border-gray-200"},[t(g,{lines:1,class:"col-span-4 p-3"})])),64)),t($,{rounded:!0,class:"mt-10",style:{width:"96px",height:"42px"}})]),_:1})):(q(),U("div",Pe,[(q(!0),U(ie,null,oe(e(a),(w,h)=>(q(),U("div",{key:h,class:"border border-gray-200"},[C("div",Ne,[C("div",Ee,P(w.folder),1),C("div",Ge,[w.isSet?(q(),U("span",Oe)):(q(),U("span",xe)),C("span",null,P(w.permission),1)])])]))),128)),le(t(_,{class:"mt-10",loading:e(s),disabled:e(s),onClick:l},{left:d(w=>[t(u,{name:"ArrowRightIcon",class:x(w.class)},null,8,["class"])]),default:d(()=>[N(" "+P(I.$t("wizard.continue")),1)]),_:1},8,["loading","disabled"]),[[re,!e(n)]])]))]),_:1},8,["title","description"])}}},We={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Re={__name:"MysqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,n=S,s=A(["sqlite","mysql","pgsql"]),{t:a}=O.useI18n(),p=te("utils"),m=Y();Q(()=>{for(const g in v.value)D.configData.hasOwnProperty(g)&&(v.value[g]=D.configData[g])});const v=k(()=>m.currentDataBaseData),r=g=>p.checkValidUrl(g),c={database_connection:{required:y.withMessage(a("validation.required"),V)},database_hostname:{required:y.withMessage(a("validation.required"),V)},database_port:{required:y.withMessage(a("validation.required"),V),numeric:ne},database_name:{required:y.withMessage(a("validation.required"),V)},database_username:{required:y.withMessage(a("validation.required"),V)},app_url:{required:y.withMessage(a("validation.required"),V),isUrl:y.withMessage(a("validation.invalid_url"),r)}},l=R(c,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),u=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",We,[t(u,{label:g.$t("wizard.database.app_url"),error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>v.value.app_url=h),invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(u,{label:g.$t("wizard.database.connection"),error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>v.value.database_connection=h),i],invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","invalid","options"])]),_:1},8,["label","error"]),t(u,{label:g.$t("wizard.database.port"),error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_port,"onUpdate:modelValue":$[2]||($[2]=h=>v.value.database_port=h),invalid:e(l).database_port.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(u,{label:g.$t("wizard.database.db_name"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_name,"onUpdate:modelValue":$[3]||($[3]=h=>v.value.database_name=h),invalid:e(l).database_name.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(u,{label:g.$t("wizard.database.username"),error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_username,"onUpdate:modelValue":$[4]||($[4]=h=>v.value.database_username=h),invalid:e(l).database_username.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(u,{label:g.$t("wizard.database.password")},{default:d(()=>[t(B,{modelValue:v.value.database_password,"onUpdate:modelValue":$[5]||($[5]=h=>v.value.database_password=h),type:"password"},null,8,["modelValue"])]),_:1},8,["label"]),t(u,{label:g.$t("wizard.database.host"),error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>v.value.database_hostname=h),invalid:e(l).database_hostname.$error},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),t(w,{type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(h=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:x(h.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)}}},Te={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},je={__name:"PgsqlDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,n=S,s=A(["sqlite","mysql","pgsql"]),{t:a}=O.useI18n(),p=te("utils"),m=Y(),v=k(()=>m.currentDataBaseData);Q(()=>{for(const g in v.value)D.configData.hasOwnProperty(g)&&(v.value[g]=D.configData[g])});const r=g=>p.checkValidUrl(g),c={database_connection:{required:y.withMessage(a("validation.required"),V)},database_hostname:{required:y.withMessage(a("validation.required"),V)},database_port:{required:y.withMessage(a("validation.required"),V),numeric:ne},database_name:{required:y.withMessage(a("validation.required"),V)},database_username:{required:y.withMessage(a("validation.required"),V)},app_url:{required:y.withMessage(a("validation.required"),V),isUrl:y.withMessage(a("validation.invalid_url"),r)}},l=R(c,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),u=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",Te,[t(u,{label:g.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>v.value.app_url=h),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>v.value.database_connection=h),i],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.port"),"content-loading":o.isFetchingInitialData,error:e(l).database_port.$error&&e(l).database_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_port,"onUpdate:modelValue":$[2]||($[2]=h=>v.value.database_port=h),"content-loading":o.isFetchingInitialData,invalid:e(l).database_port.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.db_name"),"content-loading":o.isFetchingInitialData,error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_name,"onUpdate:modelValue":$[3]||($[3]=h=>v.value.database_name=h),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.username"),"content-loading":o.isFetchingInitialData,error:e(l).database_username.$error&&e(l).database_username.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_username,"onUpdate:modelValue":$[4]||($[4]=h=>v.value.database_username=h),"content-loading":o.isFetchingInitialData,invalid:e(l).database_username.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(u,{"content-loading":o.isFetchingInitialData,label:g.$t("wizard.database.password")},{default:d(()=>[t(B,{modelValue:v.value.database_password,"onUpdate:modelValue":$[5]||($[5]=h=>v.value.database_password=h),"content-loading":o.isFetchingInitialData,type:"password"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),t(u,{label:g.$t("wizard.database.host"),"content-loading":o.isFetchingInitialData,error:e(l).database_hostname.$error&&e(l).database_hostname.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_hostname,"onUpdate:modelValue":$[6]||($[6]=h=>v.value.database_hostname=h),"content-loading":o.isFetchingInitialData,invalid:e(l).database_hostname.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),le(t(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(h=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:x(h.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},Ae={class:"grid grid-cols-1 gap-5 md:grid-cols-2 lg:mb-6 md:mb-6"},Ye={__name:"SqliteDatabase",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=o,n=S,s=A(["sqlite","mysql","pgsql"]),{t:a}=O.useI18n(),p=te("utils"),m=Y(),v=k(()=>m.currentDataBaseData);Q(()=>{for(const g in v.value)D.configData.hasOwnProperty(g)&&(v.value[g]=D.configData[g])});const r=g=>p.checkValidUrl(g),c={database_connection:{required:y.withMessage(a("validation.required"),V)},database_name:{required:y.withMessage(a("validation.required"),V)},app_url:{required:y.withMessage(a("validation.required"),V),isUrl:y.withMessage(a("validation.invalid_url"),r)}},l=R(c,v.value);function I(){if(l.value.$touch(),l.value.$invalid)return!0;n("submit-data",v.value)}function i(){l.value.database_connection.$touch(),n("on-change-driver",v.value.database_connection)}return(g,$)=>{const B=b("BaseInput"),u=b("BaseInputGroup"),_=b("BaseMultiselect"),f=b("BaseIcon"),w=b("BaseButton");return q(),U("form",{action:"",onSubmit:T(I,["prevent"])},[C("div",Ae,[t(u,{label:g.$t("wizard.database.app_url"),"content-loading":o.isFetchingInitialData,error:e(l).app_url.$error&&e(l).app_url.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:v.value.app_url,"onUpdate:modelValue":$[0]||($[0]=h=>v.value.app_url=h),"content-loading":o.isFetchingInitialData,invalid:e(l).app_url.$error,type:"text"},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.connection"),"content-loading":o.isFetchingInitialData,error:e(l).database_connection.$error&&e(l).database_connection.$errors[0].$message,required:""},{default:d(()=>[t(_,{modelValue:v.value.database_connection,"onUpdate:modelValue":[$[1]||($[1]=h=>v.value.database_connection=h),i],"content-loading":o.isFetchingInitialData,invalid:e(l).database_connection.$error,options:s,"can-deselect":!1,"can-clear":!1},null,8,["modelValue","content-loading","invalid","options"])]),_:1},8,["label","content-loading","error"]),t(u,{label:g.$t("wizard.database.db_path"),error:e(l).database_name.$error&&e(l).database_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(B,{modelValue:v.value.database_name,"onUpdate:modelValue":$[2]||($[2]=h=>v.value.database_name=h),"content-loading":o.isFetchingInitialData,invalid:e(l).database_name.$error},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","error","content-loading"])]),le(t(w,{"content-loading":o.isFetchingInitialData,type:"submit",class:"mt-4",loading:o.isSaving,disabled:o.isSaving},{left:d(h=>[o.isSaving?G("",!0):(q(),M(f,{key:0,name:"SaveIcon",class:x(h.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(g.$t("wizard.save_cont")),1)]),_:1},8,["content-loading","loading","disabled"]),[[re,!o.isFetchingInitialData]])],32)}}},Ze={components:{Mysql:Re,Pgsql:je,Sqlite:Ye},emits:["next"],setup(o,{emit:S}){const D=z("mysql"),n=z(!1),{t:s}=O.useI18n(),a=de(),p=Y(),m=k(()=>p.currentDataBaseData);async function v(c){let l={connection:c};const I=await p.fetchInstallationDatabase(l);I.data.success&&(m.value.database_connection=I.data.config.database_connection),c==="sqlite"?m.value.database_name=I.data.config.database_name:m.value.database_name=null}async function r(c){n.value=!0;try{let l=await p.addInstallationDatabase(c);if(n.value=!1,l.data.success){await p.addInstallationFinish(),S("next",3),a.showNotification({type:"success",message:s("wizard.success."+l.data.success)});return}else if(l.data.error){if(l.data.requirement){a.showNotification({type:"error",message:s("wizard.errors."+l.data.error,{version:l.data.requirement.minimum,name:c.value.database_connection})});return}a.showNotification({type:"error",message:s("wizard.errors."+l.data.error)})}else l.data.errors?a.showNotification({type:"error",message:l.data.errors[0]}):l.data.error_message&&a.showNotification({type:"error",message:l.data.error_message})}catch{a.showNotification({type:"error",message:s("validation.something_went_wrong")}),n.value=!1}finally{n.value=!1}}return{databaseData:m,database_connection:D,isSaving:n,getDatabaseConfig:v,next:r}}};function Je(o,S,D,n,s,a){const p=b("BaseWizardStep");return q(),M(p,{title:o.$t("wizard.database.database"),description:o.$t("wizard.database.desc"),"step-container":"w-full p-8 mb-8 bg-white border border-gray-200 border-solid rounded md:w-full"},{default:d(()=>[(q(),M(ue(n.databaseData.database_connection),{"config-data":n.databaseData,"is-saving":n.isSaving,onOnChangeDriver:n.getDatabaseConfig,onSubmitData:n.next},null,40,["config-data","is-saving","onOnChangeDriver","onSubmitData"]))]),_:1},8,["title","description"])}const Ke=se(Ze,[["render",Je]]),He={class:"w-full md:w-2/3"},Qe=C("p",{class:"mt-4 mb-0 text-sm text-gray-600"},"Notes:",-1),Xe=C("ul",{class:"w-full text-gray-600 list-disc list-inside"},[C("li",{class:"text-sm leading-8"},[N(" App domain should not contain "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"https://"),N(" or "),C("b",{class:"inline-block px-1 bg-gray-100 rounded-sm"},"http"),N(" in front of the domain. ")]),C("li",{class:"text-sm leading-8"},[N(" If you're accessing the website on a different port, please mention the port. For example: "),C("b",{class:"inline-block px-1 bg-gray-100"},"localhost:8080")])],-1),ea={__name:"Step4VerifyDomain",emits:["next"],setup(o,{emit:S}){const D=S,n=A({app_domain:window.location.origin.replace(/(^\w+:|^)\/\//,"")}),s=z(!1),{t:a}=O.useI18n(),p=te("utils"),m=i=>p.checkValidDomainUrl(i),v=Y(),r=de(),c={app_domain:{required:y.withMessage(a("validation.required"),V),isUrl:y.withMessage(a("validation.invalid_domain_url"),m)}},l=R(c,k(()=>n));async function I(){if(l.value.$touch(),l.value.$invalid)return!0;s.value=!0;try{await v.setInstallationDomain(n),await v.installationLogin(),(await v.checkAutheticated()).data&&D("next",4),s.value=!1}catch{r.showNotification({type:"error",message:a("wizard.verify_domain.failed")}),s.value=!1}}return(i,g)=>{const $=b("BaseInput"),B=b("BaseInputGroup"),u=b("BaseButton"),_=b("BaseWizardStep");return q(),M(_,{title:i.$t("wizard.verify_domain.title"),description:i.$t("wizard.verify_domain.desc")},{default:d(()=>[C("div",He,[t(B,{label:i.$t("wizard.verify_domain.app_domain"),error:e(l).app_domain.$error&&e(l).app_domain.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:n.app_domain,"onUpdate:modelValue":g[0]||(g[0]=f=>n.app_domain=f),invalid:e(l).app_domain.$error,type:"text",onInput:g[1]||(g[1]=f=>e(l).app_domain.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),Qe,Xe,t(u,{loading:s.value,disabled:s.value,class:"mt-8",onClick:I},{default:d(()=>[N(P(i.$t("wizard.verify_domain.verify_now")),1)]),_:1},8,["loading","disabled"])]),_:1},8,["title","description"])}}},aa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ta={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},na={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ia={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},oa={__name:"SmtpMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S;let n=z(!1);const s=A(["tls","ssl","starttls"]),{t:a}=O.useI18n(),p=ee(),m=k(()=>p.smtpConfig),v=k(()=>n.value?"text":"password");m.value.mail_driver="smtp";const r=k(()=>({smtpConfig:{mail_driver:{required:y.withMessage(a("validation.required"),V)},mail_host:{required:y.withMessage(a("validation.required"),V)},mail_port:{required:y.withMessage(a("validation.required"),V),numeric:y.withMessage(a("validation.numbers_only"),ne)},mail_encryption:{required:y.withMessage(a("validation.required"),V)},from_mail:{required:y.withMessage(a("validation.required"),V),email:y.withMessage(a("validation.email_incorrect"),X)},from_name:{required:y.withMessage(a("validation.required"),V)}}})),c=R(r,k(()=>p));async function l(){return c.value.$touch(),c.value.$invalid||D("submit-data",p.smtpConfig),!1}function I(){c.value.smtpConfig.mail_driver.$touch(),D("on-change-driver",p.smtpConfig.mail_driver)}return(i,g)=>{const $=b("BaseMultiselect"),B=b("BaseInputGroup"),u=b("BaseInput"),_=b("BaseIcon"),f=b("BaseButton");return q(),U("form",{onSubmit:T(l,["prevent"])},[C("div",aa,[t(B,{label:i.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(c).smtpConfig.mail_driver.$error&&e(c).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t($,{modelValue:m.value.mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=w=>m.value.mail_driver=w),I],options:e(p).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(c).smtpConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t(B,{label:i.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(c).smtpConfig.mail_host.$error&&e(c).smtpConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(u,{modelValue:m.value.mail_host,"onUpdate:modelValue":g[1]||(g[1]=w=>m.value.mail_host=w),modelModifiers:{trim:!0},invalid:e(c).smtpConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:g[2]||(g[2]=w=>e(c).smtpConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ta,[t(B,{label:i.$t("wizard.mail.username"),"content-loading":o.isFetchingInitialData},{default:d(()=>[t(u,{modelValue:m.value.mail_username,"onUpdate:modelValue":g[3]||(g[3]=w=>m.value.mail_username=w),modelModifiers:{trim:!0},"content-loading":o.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["label","content-loading"]),t(B,{label:i.$t("wizard.mail.password"),"content-loading":o.isFetchingInitialData},{default:d(()=>[t(u,{modelValue:m.value.mail_password,"onUpdate:modelValue":g[6]||(g[6]=w=>m.value.mail_password=w),modelModifiers:{trim:!0},type:v.value,"content-loading":o.isFetchingInitialData,autocomplete:"off","data-lpignore":"true",name:"password"},{right:d(()=>[e(n)?(q(),M(_,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[4]||(g[4]=w=>K(n)?n.value=!e(n):n=!e(n))})):(q(),M(_,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:g[5]||(g[5]=w=>K(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","type","content-loading"])]),_:1},8,["label","content-loading"])]),C("div",na,[t(B,{label:i.$t("wizard.mail.port"),error:e(c).smtpConfig.mail_port.$error&&e(c).smtpConfig.mail_port.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(u,{modelValue:m.value.mail_port,"onUpdate:modelValue":g[7]||(g[7]=w=>m.value.mail_port=w),modelModifiers:{trim:!0},invalid:e(c).smtpConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:g[8]||(g[8]=w=>e(c).smtpConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(B,{label:i.$t("wizard.mail.encryption"),error:e(c).smtpConfig.mail_encryption.$error&&e(c).smtpConfig.mail_encryption.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t($,{modelValue:m.value.mail_encryption,"onUpdate:modelValue":g[9]||(g[9]=w=>m.value.mail_encryption=w),modelModifiers:{trim:!0},options:s,"can-deselect":!1,invalid:e(c).smtpConfig.mail_encryption.$error,"content-loading":o.isFetchingInitialData,onInput:g[10]||(g[10]=w=>e(c).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),C("div",ia,[t(B,{label:i.$t("wizard.mail.from_mail"),error:e(c).smtpConfig.from_mail.$error&&e(c).smtpConfig.from_mail.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(u,{modelValue:m.value.from_mail,"onUpdate:modelValue":g[11]||(g[11]=w=>m.value.from_mail=w),modelModifiers:{trim:!0},invalid:e(c).smtpConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:g[12]||(g[12]=w=>e(c).smtpConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"]),t(B,{label:i.$t("wizard.mail.from_name"),error:e(c).smtpConfig.from_name.$error&&e(c).smtpConfig.from_name.$errors[0].$message,"content-loading":o.isFetchingInitialData,required:""},{default:d(()=>[t(u,{modelValue:m.value.from_name,"onUpdate:modelValue":g[13]||(g[13]=w=>m.value.from_name=w),modelModifiers:{trim:!0},invalid:e(c).smtpConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:g[14]||(g[14]=w=>e(c).smtpConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","error","content-loading"])]),t(f,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(w=>[o.isSaving?G("",!0):(q(),M(_,{key:0,name:"SaveIcon",class:x(w.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(i.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},la={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},ra={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 lg:mb-6 md:mb-6"},sa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},da={__name:"MailgunMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S;let n=z(!1);const s=ee(),{t:a}=O.useI18n(),p=k(()=>s.mailgunConfig),m=k(()=>n.value?"text":"password");p.value.mail_driver="mailgun";const v=k(()=>({mailgunConfig:{mail_driver:{required:y.withMessage(a("validation.required"),V)},mail_mailgun_domain:{required:y.withMessage(a("validation.required"),V)},mail_mailgun_endpoint:{required:y.withMessage(a("validation.required"),V)},mail_mailgun_secret:{required:y.withMessage(a("validation.required"),V)},from_mail:{required:y.withMessage(a("validation.required"),V),email:X},from_name:{required:y.withMessage(a("validation.required"),V)}}})),r=R(v,k(()=>s));function c(){return r.value.$touch(),r.value.$invalid||D("submit-data",s.mailgunConfig),!1}function l(){r.value.mailgunConfig.mail_driver.$touch(),D("on-change-driver",s.mailgunConfig.mail_driver)}return(I,i)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),u=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(c,["prevent"])},[C("div",la,[t($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_driver.$error&&e(r).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(g,{modelValue:p.value.mail_driver,"onUpdate:modelValue":[i[0]||(i[0]=f=>p.value.mail_driver=f),l],options:e(s).mail_drivers,"can-deselect":!1,invalid:e(r).mailgunConfig.mail_driver.$error,"content-loading":o.isFetchingInitialData},null,8,["modelValue","options","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.mailgun_domain"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_domain.$error&&e(r).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:p.value.mail_mailgun_domain,"onUpdate:modelValue":i[1]||(i[1]=f=>p.value.mail_mailgun_domain=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_domain.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_domain",onInput:i[2]||(i[2]=f=>e(r).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ra,[t($,{label:I.$t("wizard.mail.mailgun_secret"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_secret.$error&&e(r).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:p.value.mail_mailgun_secret,"onUpdate:modelValue":i[5]||(i[5]=f=>p.value.mail_mailgun_secret=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_secret.$error,type:m.value,"content-loading":o.isFetchingInitialData,name:"mailgun_secret",autocomplete:"off","data-lpignore":"true",onInput:i[6]||(i[6]=f=>e(r).mailgunConfig.mail_mailgun_secret.$touch())},{right:d(()=>[e(n)?(q(),M(u,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[3]||(i[3]=f=>K(n)?n.value=!e(n):n=!e(n))})):(q(),M(u,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[4]||(i[4]=f=>K(n)?n.value=!e(n):n=!e(n))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.mailgun_endpoint"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.mail_mailgun_endpoint.$error&&e(r).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:p.value.mail_mailgun_endpoint,"onUpdate:modelValue":i[7]||(i[7]=f=>p.value.mail_mailgun_endpoint=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.mail_mailgun_endpoint.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mailgun_endpoint",onInput:i[8]||(i[8]=f=>e(r).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",sa,[t($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_mail.$error&&e(r).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:p.value.from_mail,"onUpdate:modelValue":i[9]||(i[9]=f=>p.value.from_mail=f),modelModifiers:{trim:!0},name:"from_mail",type:"text",invalid:e(r).mailgunConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,onInput:i[10]||(i[10]=f=>e(r).mailgunConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).mailgunConfig.from_name.$error&&e(r).mailgunConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:p.value.from_name,"onUpdate:modelValue":i[11]||(i[11]=f=>p.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).mailgunConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_name",onInput:i[12]||(i[12]=f=>e(r).mailgunConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:I.loading,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?G("",!0):(q(),M(u,{key:0,name:"SaveIcon",class:x(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},ua={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ma={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ga={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},va={__name:"SesMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S,{t:n}=O.useI18n(),s=A(["tls","ssl","starttls"]);let a=z(!1);const p=ee(),m=k(()=>p.sesConfig);m.value.mail_driver="ses";const v=k(()=>({sesConfig:{mail_driver:{required:y.withMessage(n("validation.required"),V)},mail_host:{required:y.withMessage(n("validation.required"),V)},mail_port:{required:y.withMessage(n("validation.required"),V),numeric:ne},mail_ses_key:{required:y.withMessage(n("validation.required"),V)},mail_ses_secret:{required:y.withMessage(n("validation.required"),V)},mail_encryption:{required:y.withMessage(n("validation.required"),V)},from_mail:{required:y.withMessage(n("validation.required"),V),email:y.withMessage(n("validation.email_incorrect"),X)},from_name:{required:y.withMessage(n("validation.required"),V)}}})),r=R(v,k(()=>p));async function c(){return r.value.$touch(),r.value.$invalid||D("submit-data",p.sesConfig),!1}function l(){r.value.sesConfig.mail_driver.$touch(),D("on-change-driver",p.sesConfig.mail_driver)}return(I,i)=>{const g=b("BaseMultiselect"),$=b("BaseInputGroup"),B=b("BaseInput"),u=b("BaseIcon"),_=b("BaseButton");return q(),U("form",{onSubmit:T(c,["prevent"])},[C("div",ua,[t($,{label:I.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_driver.$error&&e(r).sesConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(g,{modelValue:m.value.mail_driver,"onUpdate:modelValue":[i[0]||(i[0]=f=>m.value.mail_driver=f),l],options:e(p).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData,invalid:e(r).sesConfig.mail_driver.$error},null,8,["modelValue","options","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.host"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_host.$error&&e(r).sesConfig.mail_host.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.mail_host,"onUpdate:modelValue":i[1]||(i[1]=f=>m.value.mail_host=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_host.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_host",onInput:i[2]||(i[2]=f=>e(r).sesConfig.mail_host.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ma,[t($,{label:I.$t("wizard.mail.port"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_port.$error&&e(r).sesConfig.mail_port.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.mail_port,"onUpdate:modelValue":i[3]||(i[3]=f=>m.value.mail_port=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_port.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_port",onInput:i[4]||(i[4]=f=>e(r).sesConfig.mail_port.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.encryption"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_encryption.$error&&e(r).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:d(()=>[t(g,{modelValue:m.value.mail_encryption,"onUpdate:modelValue":i[5]||(i[5]=f=>m.value.mail_encryption=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_encryption.$error,options:s,"content-loading":o.isFetchingInitialData,onInput:i[6]||(i[6]=f=>e(r).sesConfig.mail_encryption.$touch())},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ca,[t($,{label:I.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_mail.$error&&e(r).sesConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.from_mail,"onUpdate:modelValue":i[7]||(i[7]=f=>m.value.from_mail=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"from_mail",onInput:i[8]||(i[8]=f=>e(r).sesConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.from_name.$error&&e(r).sesConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.from_name,"onUpdate:modelValue":i[9]||(i[9]=f=>m.value.from_name=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:i[10]||(i[10]=f=>e(r).sesConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",ga,[t($,{label:I.$t("wizard.mail.ses_key"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_key.$error&&e(r).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.mail_ses_key,"onUpdate:modelValue":i[11]||(i[11]=f=>m.value.mail_ses_key=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_key.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"mail_ses_key",onInput:i[12]||(i[12]=f=>e(r).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t($,{label:I.$t("wizard.mail.ses_secret"),"content-loading":o.isFetchingInitialData,error:e(r).sesConfig.mail_ses_secret.$error&&e(r).sesConfig.mail_ses_secret.$errors[0].$message,required:""},{default:d(()=>[t(B,{modelValue:m.value.mail_ses_secret,"onUpdate:modelValue":i[15]||(i[15]=f=>m.value.mail_ses_secret=f),modelModifiers:{trim:!0},invalid:e(r).sesConfig.mail_ses_secret.$error,type:I.getInputType,"content-loading":o.isFetchingInitialData,name:"mail_ses_secret",autocomplete:"off","data-lpignore":"true",onInput:i[16]||(i[16]=f=>e(r).sesConfig.mail_ses_secret.$touch())},{right:d(()=>[e(a)?(q(),M(u,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[13]||(i[13]=f=>K(a)?a.value=!e(a):a=!e(a))})):(q(),M(u,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:i[14]||(i[14]=f=>K(a)?a.value=!e(a):a=!e(a))}))]),_:1},8,["modelValue","invalid","type","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(_,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(f=>[o.isSaving?G("",!0):(q(),M(u,{key:0,name:"SaveIcon",class:x(f.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(I.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},pa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},fa={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},ce={__name:"BasicMailDriver",props:{isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1}},emits:["submit-data","on-change-driver"],setup(o,{emit:S}){const D=S,{t:n}=O.useI18n(),s=ee(),a=k(()=>s.basicMailConfig);k(()=>s.mail_drivers),a.value.mail_driver="mail";const p=k(()=>({basicMailConfig:{mail_driver:{required:y.withMessage(n("validation.required"),V)},from_mail:{required:y.withMessage(n("validation.required"),V),email:y.withMessage(n("validation.email_incorrect"),X)},from_name:{required:y.withMessage(n("validation.required"),V)}}})),m=R(p,k(()=>s));function v(){return m.value.$touch(),m.value.$invalid||D("submit-data",s.basicMailConfig),!1}function r(){var c;m.value.basicMailConfig.mail_driver.$touch(),D("on-change-driver",(c=s==null?void 0:s.basicMailConfig)==null?void 0:c.mail_driver)}return(c,l)=>{const I=b("BaseMultiselect"),i=b("BaseInputGroup"),g=b("BaseInput"),$=b("BaseIcon"),B=b("BaseButton");return q(),U("form",{onSubmit:T(v,["prevent"])},[C("div",pa,[t(i,{label:c.$t("wizard.mail.driver"),"content-loading":o.isFetchingInitialData,error:e(m).basicMailConfig.mail_driver.$error&&e(m).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:d(()=>[t(I,{modelValue:a.value.mail_driver,"onUpdate:modelValue":[l[0]||(l[0]=u=>a.value.mail_driver=u),r],invalid:e(m).basicMailConfig.mail_driver.$error,options:e(s).mail_drivers,"can-deselect":!1,"content-loading":o.isFetchingInitialData},null,8,["modelValue","invalid","options","content-loading"])]),_:1},8,["label","content-loading","error"])]),C("div",fa,[t(i,{label:c.$t("wizard.mail.from_name"),"content-loading":o.isFetchingInitialData,error:e(m).basicMailConfig.from_name.$error&&e(m).basicMailConfig.from_name.$errors[0].$message,required:""},{default:d(()=>[t(g,{modelValue:a.value.from_name,"onUpdate:modelValue":l[1]||(l[1]=u=>a.value.from_name=u),modelModifiers:{trim:!0},invalid:e(m).basicMailConfig.from_name.$error,"content-loading":o.isFetchingInitialData,type:"text",name:"name",onInput:l[2]||(l[2]=u=>e(m).basicMailConfig.from_name.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"]),t(i,{label:c.$t("wizard.mail.from_mail"),"content-loading":o.isFetchingInitialData,error:e(m).basicMailConfig.from_mail.$error&&e(m).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:d(()=>[t(g,{modelValue:a.value.from_mail,"onUpdate:modelValue":l[3]||(l[3]=u=>a.value.from_mail=u),modelModifiers:{trim:!0},invalid:e(m).basicMailConfig.from_mail.$error,"content-loading":o.isFetchingInitialData,type:"text",onInput:l[4]||(l[4]=u=>e(m).basicMailConfig.from_mail.$touch())},null,8,["modelValue","invalid","content-loading"])]),_:1},8,["label","content-loading","error"])]),t(B,{loading:o.isSaving,disabled:o.isSaving,"content-loading":o.isFetchingInitialData,class:"mt-4"},{left:d(u=>[o.isSaving?G("",!0):(q(),M($,{key:0,name:"SaveIcon",class:x(u.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(c.$t("general.save")),1)]),_:1},8,["loading","disabled","content-loading"])],32)}}},_a={components:{Smtp:oa,Mailgun:da,Ses:va,sendmail:ce,Mail:ce},emits:["next"],setup(o,{emit:S}){const D=z(!1),n=z(!1),s=ee();s.mail_driver="mail",p();function a(v){s.mail_driver=v}async function p(){n.value=!0,await s.fetchMailDrivers(),n.value=!1}async function m(v){D.value=!0;let r=await s.updateMailConfig(v);D.value=!1,r.data.success&&await S("next",5)}return{mailDriverStore:s,isSaving:D,isFetchingInitialData:n,changeDriver:a,next:m}}};function ba(o,S,D,n,s,a){const p=b("BaseWizardStep");return q(),M(p,{title:o.$t("wizard.mail.mail_config"),description:o.$t("wizard.mail.mail_config_desc")},{default:d(()=>[C("form",{action:"",onSubmit:S[1]||(S[1]=T((...m)=>n.next&&n.next(...m),["prevent"]))},[(q(),M(ue(n.mailDriverStore.mail_driver),{"config-data":n.mailDriverStore.mailConfigData,"is-saving":n.isSaving,"is-fetching-initial-data":n.isFetchingInitialData,onOnChangeDriver:S[0]||(S[0]=m=>n.changeDriver(m)),onSubmitData:n.next},null,40,["config-data","is-saving","is-fetching-initial-data","onSubmitData"]))],32)]),_:1},8,["title","description"])}const $a=se(_a,[["render",ba]]),wa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},ha={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},ya={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Ia={__name:"Step6AccountSettings",emits:["next"],setup(o,{emit:S}){const D=S;let n=z(!1);const s=z(!1),a=z(!1);let p=z(""),m=z(null);const v=ve(),r=ae(),{t:c}=O.useI18n(),l=k(()=>v.userForm),I=k(()=>({userForm:{name:{required:y.withMessage(c("validation.required"),V)},email:{required:y.withMessage(c("validation.required"),V),email:y.withMessage(c("validation.email_incorrect"),X)},password:{required:y.withMessage(c("validation.required"),V),minLength:y.withMessage(c("validation.password_min_length",{count:8}),be(8))},confirm_password:{required:y.withMessage(c("validation.required"),$e(v.userForm.password)),sameAsPassword:y.withMessage(c("validation.password_incorrect"),we(v.userForm.password))}}})),i=R(I,k(()=>v));function g(u,_){m.value=_}function $(){m.value=null}async function B(){if(i.value.userForm.$touch(),i.value.userForm.$invalid)return!0;n.value=!0;let u=await v.updateCurrentUser(l.value);if(n.value=!1,u.data.data){if(m.value){let f=new FormData;f.append("admin_avatar",m.value),await v.uploadAvatar(f)}const _=u.data.data.companies[0];await r.setSelectedCompany(_),D("next",6)}}return(u,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),L=b("EyeOffIcon"),Z=b("EyeIcon"),J=b("BaseIcon"),H=b("BaseButton"),E=b("BaseWizardStep");return q(),M(E,{title:u.$t("wizard.account_info"),description:u.$t("wizard.account_info_desc")},{default:d(()=>[C("form",{action:"",onSubmit:T(B,["prevent"])},[C("div",wa,[t(w,{label:u.$t("settings.account_settings.profile_picture")},{default:d(()=>[t(f,{avatar:!0,"preview-image":e(p),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",ha,[t(w,{label:u.$t("wizard.name"),error:e(i).userForm.name.$error&&e(i).userForm.name.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:l.value.name,"onUpdate:modelValue":_[0]||(_[0]=F=>l.value.name=F),modelModifiers:{trim:!0},invalid:e(i).userForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(i).userForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:u.$t("wizard.email"),error:e(i).userForm.email.$error&&e(i).userForm.email.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:l.value.email,"onUpdate:modelValue":_[2]||(_[2]=F=>l.value.email=F),modelModifiers:{trim:!0},invalid:e(i).userForm.email.$error,type:"text",name:"email",onInput:_[3]||(_[3]=F=>e(i).userForm.email.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),C("div",ya,[t(w,{label:u.$t("wizard.password"),error:e(i).userForm.password.$error&&e(i).userForm.password.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:l.value.password,"onUpdate:modelValue":_[6]||(_[6]=F=>l.value.password=F),modelModifiers:{trim:!0},invalid:e(i).userForm.password.$error,type:s.value?"text":"password",name:"password",onInput:_[7]||(_[7]=F=>e(i).userForm.password.$touch())},{right:d(()=>[s.value?(q(),M(L,{key:0,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[4]||(_[4]=F=>s.value=!s.value)})):(q(),M(Z,{key:1,class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[5]||(_[5]=F=>s.value=!s.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"]),t(w,{label:u.$t("wizard.confirm_password"),error:e(i).userForm.confirm_password.$error&&e(i).userForm.confirm_password.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:l.value.confirm_password,"onUpdate:modelValue":_[10]||(_[10]=F=>l.value.confirm_password=F),modelModifiers:{trim:!0},invalid:e(i).userForm.confirm_password.$error,type:a.value?"text":"password",name:"confirm_password",onInput:_[11]||(_[11]=F=>e(i).userForm.confirm_password.$touch())},{right:d(()=>[a.value?(q(),M(J,{key:0,name:"EyeOffIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[8]||(_[8]=F=>a.value=!a.value)})):(q(),M(J,{key:1,name:"EyeIcon",class:"w-5 h-5 mr-1 text-gray-500 cursor-pointer",onClick:_[9]||(_[9]=F=>a.value=!a.value)}))]),_:1},8,["modelValue","invalid","type"])]),_:1},8,["label","error"])]),t(H,{loading:e(n),disabled:e(n),class:"mt-4"},{left:d(F=>[e(n)?G("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:x(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},qa={class:"grid grid-cols-1 mb-4 md:grid-cols-2 md:mb-6"},Ba={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ca={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Va={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},Da={__name:"Step7CompanyInfo",emits:["next"],setup(o,{emit:S}){const D=S;let n=z(!1),s=z(!1);const{t:a}=O.useI18n();let p=z(null),m=z(null),v=z(null);const r=A({name:null,address:{address_street_1:"",address_street_2:"",website:"",country_id:null,state:"",city:"",phone:"",zip:""}}),c=ae(),l=pe();Q(async()=>{var u;n.value=!0,await l.fetchCountries(),n.value=!1,r.address.country_id=(u=l.countries.find(_=>_.code=="US"))==null?void 0:u.id});const I={companyForm:{name:{required:y.withMessage(a("validation.required"),V)},address:{country_id:{required:y.withMessage(a("validation.required"),V)},address_street_1:{maxLength:y.withMessage(a("validation.address_maxlength",{count:255}),me(255))},address_street_2:{maxLength:y.withMessage(a("validation.address_maxlength",{count:255}),me(255))}}}},i=R(I,{companyForm:r});function g(u,_,f,w){v.value=w.name,m.value=_}function $(){m.value=null}async function B(){if(i.value.companyForm.$touch(),i.value.$invalid)return!0;if(s.value=!0,c.updateCompany(r)){if(m.value){let _=new FormData;_.append("company_logo",JSON.stringify({name:v.value,data:m.value})),await c.updateCompanyLogo(_)}s.value=!1,D("next",7)}}return(u,_)=>{const f=b("BaseFileUploader"),w=b("BaseInputGroup"),h=b("BaseInput"),L=b("BaseMultiselect"),Z=b("BaseTextarea"),J=b("BaseIcon"),H=b("BaseButton"),E=b("BaseWizardStep");return q(),M(E,{title:u.$t("wizard.company_info"),description:u.$t("wizard.company_info_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:T(B,["prevent"])},[C("div",qa,[t(w,{label:u.$t("settings.company_info.company_logo")},{default:d(()=>[t(f,{base64:"","preview-image":e(p),onChange:g,onRemove:$},null,8,["preview-image"])]),_:1},8,["label"])]),C("div",Ba,[t(w,{label:u.$t("wizard.company_name"),error:e(i).companyForm.name.$error&&e(i).companyForm.name.$errors[0].$message,required:""},{default:d(()=>[t(h,{modelValue:r.name,"onUpdate:modelValue":_[0]||(_[0]=F=>r.name=F),modelModifiers:{trim:!0},invalid:e(i).companyForm.name.$error,type:"text",name:"name",onInput:_[1]||(_[1]=F=>e(i).companyForm.name.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),t(w,{label:u.$t("wizard.country"),error:e(i).companyForm.address.country_id.$error&&e(i).companyForm.address.country_id.$errors[0].$message,"content-loading":e(n),required:""},{default:d(()=>[t(L,{modelValue:r.address.country_id,"onUpdate:modelValue":_[2]||(_[2]=F=>r.address.country_id=F),label:"name",invalid:e(i).companyForm.address.country_id.$error,options:e(l).countries,"value-prop":"id","can-deselect":!1,"can-clear":!1,"content-loading":e(n),placeholder:u.$t("general.select_country"),searchable:"","track-by":"name"},null,8,["modelValue","invalid","options","content-loading","placeholder"])]),_:1},8,["label","error","content-loading"])]),C("div",Ca,[t(w,{label:u.$t("wizard.state")},{default:d(()=>[t(h,{modelValue:r.address.state,"onUpdate:modelValue":_[3]||(_[3]=F=>r.address.state=F),name:"state",type:"text"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:u.$t("wizard.city")},{default:d(()=>[t(h,{modelValue:r.address.city,"onUpdate:modelValue":_[4]||(_[4]=F=>r.address.city=F),name:"city",type:"text"},null,8,["modelValue"])]),_:1},8,["label"])]),C("div",Va,[C("div",null,[t(w,{label:u.$t("wizard.address"),error:e(i).companyForm.address.address_street_1.$error&&e(i).companyForm.address.address_street_1.$errors[0].$message},{default:d(()=>[t(Z,{modelValue:r.address.address_street_1,"onUpdate:modelValue":_[5]||(_[5]=F=>r.address.address_street_1=F),modelModifiers:{trim:!0},invalid:e(i).companyForm.address.address_street_1.$error,placeholder:u.$t("general.street_1"),name:"billing_street1",rows:"2",onInput:_[6]||(_[6]=F=>e(i).companyForm.address.address_street_1.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["label","error"]),t(w,{error:e(i).companyForm.address.address_street_2.$error&&e(i).companyForm.address.address_street_2.$errors[0].$message,class:"mt-1 lg:mt-2 md:mt-2"},{default:d(()=>[t(Z,{modelValue:r.address.address_street_2,"onUpdate:modelValue":_[7]||(_[7]=F=>r.address.address_street_2=F),invalid:e(i).companyForm.address.address_street_2.$error,placeholder:u.$t("general.street_2"),name:"billing_street2",rows:"2",onInput:_[8]||(_[8]=F=>e(i).companyForm.address.address_street_2.$touch())},null,8,["modelValue","invalid","placeholder"])]),_:1},8,["error"])]),C("div",null,[t(w,{label:u.$t("wizard.zip_code")},{default:d(()=>[t(h,{modelValue:r.address.zip,"onUpdate:modelValue":_[9]||(_[9]=F=>r.address.zip=F),modelModifiers:{trim:!0},type:"text",name:"zip"},null,8,["modelValue"])]),_:1},8,["label"]),t(w,{label:u.$t("wizard.phone"),class:"mt-4"},{default:d(()=>[t(h,{modelValue:r.address.phone,"onUpdate:modelValue":_[10]||(_[10]=F=>r.address.phone=F),modelModifiers:{trim:!0},type:"text",name:"phone"},null,8,["modelValue"])]),_:1},8,["label"])])]),t(H,{loading:e(s),disabled:e(s),class:"mt-4"},{left:d(F=>[e(s)?G("",!0):(q(),M(J,{key:0,name:"SaveIcon",class:x(F.class)},null,8,["class"]))]),default:d(()=>[N(" "+P(u.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled"])],32)]),_:1},8,["title","description"])}}},Sa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Fa={class:"grid grid-cols-1 gap-4 mb-4 md:grid-cols-2 md:mb-6"},Ma={class:"grid grid-cols-1 gap-4 mb-6 md:grid-cols-2"},za={__name:"Step8CompanyPreferences",emits:["next"],setup(o,{emit:S}){const D=S,n=z(!1);let s=z(!1),a=A({currency:1,language:"en",carbon_date_format:"d M Y",time_zone:"UTC",fiscal_year:"1-12"});const{tm:p,t:m}=O.useI18n(),v=fe();s.value=!0,A([{title:p("settings.customization.invoices.allow"),value:"allow"},{title:p("settings.customization.invoices.disable_on_invoice_partial_paid"),value:"disable_on_invoice_partial_paid"},{title:p("settings.customization.invoices.disable_on_invoice_paid"),value:"disable_on_invoice_paid"},{title:p("settings.customization.invoices.disable_on_invoice_sent"),value:"disable_on_invoice_sent"}]);const r=ge(),c=pe(),l=ae(),I=ve(),i=de();let g={key:"fiscal_years"},$={key:"languages"};s.value=!0,Promise.all([c.fetchCurrencies(),c.fetchDateFormats(),c.fetchTimeZones(),c.fetchCountries(),c.fetchConfig(g),c.fetchConfig($)]).then(([f])=>{s.value=!1});const B=k(()=>({currentPreferences:{currency:{required:y.withMessage(m("validation.required"),V)},language:{required:y.withMessage(m("validation.required"),V)},carbon_date_format:{required:y.withMessage(m("validation.required"),V)},time_zone:{required:y.withMessage(m("validation.required"),V)},fiscal_year:{required:y.withMessage(m("validation.required"),V)}}})),u=R(B,{currentPreferences:a});async function _(){if(u.value.currentPreferences.$touch(),u.value.$invalid)return!0;r.openDialog({title:m("general.do_you_wish_to_continue"),message:m("wizard.currency_set_alert"),yesLabel:m("general.ok"),noLabel:m("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(async f=>{if(f){let w={settings:{...a}};n.value=!0,delete w.settings.discount_per_item;let h=await l.updateCompanySettings({data:w});if(h.data){n.value=!1;let L={settings:{language:a.language}};(await I.updateUserSettings(L)).data&&(D("next","COMPLETED"),i.showNotification({type:"success",message:"Login Successful"}),v.push("/admin/dashboard")),he.set("auth.token",h.data.token)}return!0}return n.value=!1,!0})}return(f,w)=>{const h=b("BaseMultiselect"),L=b("BaseInputGroup"),Z=b("BaseIcon"),J=b("BaseButton"),H=b("BaseWizardStep");return q(),M(H,{title:f.$t("wizard.preferences"),description:f.$t("wizard.preferences_desc"),"step-container":"bg-white border border-gray-200 border-solid mb-8 md:w-full p-8 rounded w-full"},{default:d(()=>[C("form",{action:"",onSubmit:T(_,["prevent"])},[C("div",null,[C("div",Sa,[t(L,{label:f.$t("wizard.currency"),error:e(u).currentPreferences.currency.$error&&e(u).currentPreferences.currency.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(h,{modelValue:e(a).currency,"onUpdate:modelValue":w[0]||(w[0]=E=>e(a).currency=E),"content-loading":e(s),options:e(c).currencies,label:"name","value-prop":"id",searchable:!0,"track-by":"name",placeholder:f.$t("settings.currencies.select_currency"),invalid:e(u).currentPreferences.currency.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(L,{label:f.$t("settings.preferences.default_language"),error:e(u).currentPreferences.language.$error&&e(u).currentPreferences.language.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(h,{modelValue:e(a).language,"onUpdate:modelValue":w[1]||(w[1]=E=>e(a).language=E),"content-loading":e(s),options:e(c).languages,label:"name","value-prop":"code",placeholder:f.$t("settings.preferences.select_language"),class:"w-full","track-by":"name",searchable:!0,invalid:e(u).currentPreferences.language.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",Fa,[t(L,{label:f.$t("wizard.date_format"),error:e(u).currentPreferences.carbon_date_format.$error&&e(u).currentPreferences.carbon_date_format.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(h,{modelValue:e(a).carbon_date_format,"onUpdate:modelValue":w[2]||(w[2]=E=>e(a).carbon_date_format=E),"content-loading":e(s),options:e(c).dateFormats,label:"display_date","value-prop":"carbon_format_value",placeholder:f.$t("settings.preferences.select_date_format"),"track-by":"display_date",searchable:"",invalid:e(u).currentPreferences.carbon_date_format.$error,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"]),t(L,{label:f.$t("wizard.time_zone"),error:e(u).currentPreferences.time_zone.$error&&e(u).currentPreferences.time_zone.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(h,{modelValue:e(a).time_zone,"onUpdate:modelValue":w[3]||(w[3]=E=>e(a).time_zone=E),"content-loading":e(s),options:e(c).timeZones,label:"key","value-prop":"value",placeholder:f.$t("settings.preferences.select_time_zone"),"track-by":"key",searchable:!0,invalid:e(u).currentPreferences.time_zone.$error},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),C("div",Ma,[t(L,{label:f.$t("wizard.fiscal_year"),error:e(u).currentPreferences.fiscal_year.$error&&e(u).currentPreferences.fiscal_year.$errors[0].$message,"content-loading":e(s),required:""},{default:d(()=>[t(h,{modelValue:e(a).fiscal_year,"onUpdate:modelValue":w[4]||(w[4]=E=>e(a).fiscal_year=E),"content-loading":e(s),options:e(c).fiscalYears,label:"key","value-prop":"value",placeholder:f.$t("settings.preferences.select_financial_year"),invalid:e(u).currentPreferences.fiscal_year.$error,"track-by":"key",searchable:!0,class:"w-full"},null,8,["modelValue","content-loading","options","placeholder","invalid"])]),_:1},8,["label","error","content-loading"])]),t(J,{loading:n.value,disabled:n.value,"content-loading":e(s),class:"mt-4"},{left:d(E=>[t(Z,{name:"SaveIcon",class:x(E.class)},null,8,["class"])]),default:d(()=>[N(" "+P(f.$t("wizard.save_cont")),1)]),_:1},8,["loading","disabled","content-loading"])])],32)]),_:1},8,["title","description"])}}},ka={components:{step_1:Ue,step_2:Le,step_3:Ke,step_4:ea,step_5:$a,step_6:Ia,step_7:Da,step_8:za},setup(){let o=z("step_1"),S=z(1);const D=fe(),n=Y();s();async function s(){let v=await n.fetchInstallationStep();if(v.data.profile_complete==="COMPLETED"){D.push("/admin/dashboard");return}let r=parseInt(v.data.profile_complete);r&&(S.value=r+1,o.value=`step_${r+1}`)}async function a(v){var c,l;let r={profile_complete:v};try{return await n.addInstallationStep(r),!0}catch(I){return((l=(c=I==null?void 0:I.response)==null?void 0:c.data)==null?void 0:l.message)==="The MAC is invalid."&&window.location.reload(),!1}}async function p(v){if(v&&!await a(v))return!1;S.value++,S.value<=8&&(o.value="step_"+S.value)}function m(v){}return{stepComponent:o,currentStepNumber:S,onStepChange:p,saveStepProgress:a,onNavClick:m}}},Ua={class:"flex flex-col items-center justify-between w-full pt-10"};function Pa(o,S,D,n,s,a){const p=b("BaseWizard");return q(),U("div",Ua,[t(p,{steps:7,"current-step":n.currentStepNumber,onClick:n.onNavClick},{default:d(()=>[(q(),M(ue(n.stepComponent),{onNext:n.onStepChange},null,40,["onNext"]))]),_:1},8,["current-step","onClick"])])}const Ga=se(ka,[["render",Pa]]);export{Ga as default};
