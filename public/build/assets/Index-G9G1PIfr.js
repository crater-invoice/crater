import{a5 as M,u as W,e as G,K as O,J as oe,f as q,a3 as re,r as o,o as p,n as f,w as t,m as n,a,q as B,t as d,g as b,F as ue,l as D,z as ie,W as ce,a8 as de,b as g,aa as A,ab as j,H as V,I as H,a4 as me,p as E}from"./main-vzIkKseS.js";import{u as J}from"./users-8F9xl7d2.js";import{_ as pe}from"./AstronautIcon-Cu4zzuLg.js";const fe={props:{row:{type:Object,default:null},table:{type:Object,default:null},loadData:{type:Function,default:null}},setup(U){const $=U,u=M();W();const{t:_}=G();O();const y=oe();q();const k=J();re("utils");function m(i){u.openDialog({title:_("general.are_you_sure"),message:_("users.confirm_delete",1),yesLabel:_("general.ok"),noLabel:_("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(l=>{l&&k.deleteUser({ids:[i]}).then(h=>{h&&$.loadData&&$.loadData()})})}return(i,l)=>{const h=o("BaseIcon"),C=o("BaseButton"),v=o("BaseDropdownItem"),w=o("router-link"),x=o("BaseDropdown");return p(),f(x,null,{activator:t(()=>[n(y).name==="users.view"?(p(),f(C,{key:0,variant:"primary"},{default:t(()=>[a(h,{name:"DotsHorizontalIcon",class:"h-5 text-white"})]),_:1})):(p(),f(h,{key:1,name:"DotsHorizontalIcon",class:"h-5 text-gray-500"}))]),default:t(()=>[a(w,{to:`/admin/users/${U.row.id}/edit`},{default:t(()=>[a(v,null,{default:t(()=>[a(h,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),B(" "+d(i.$t("general.edit")),1)]),_:1})]),_:1},8,["to"]),a(v,{onClick:l[0]||(l[0]=S=>m(U.row.id))},{default:t(()=>[a(h,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),B(" "+d(i.$t("general.delete")),1)]),_:1})]),_:1})}}},_e={class:"flex items-center justify-end space-x-5"},he={class:"relative table-container"},ge={class:"relative flex items-center justify-end h-5 border-gray-200 border-solid"},Be={class:"flex text-sm font-medium cursor-pointer select-none text-primary-400"},ye={class:"absolute z-10 items-center left-6 top-2.5 select-none"},ve={class:"custom-control custom-checkbox"},Ie={setup(U){W();const $=M(),u=J(),_=O();q();let y=b(!1),k=b(!0);b(null),b("created_at"),b(!1);const{t:m}=G();let i=b(null),l=ue({name:"",email:"",phone:""});const h=D(()=>[{key:"status",thClass:"extra",tdClass:"font-medium text-gray-900",sortable:!1},{key:"name",label:m("users.name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"email",label:"Email"},{key:"phone",label:m("users.phone")},{key:"created_at",label:m("users.added_on")},{key:"actions",tdClass:"text-right text-sm font-medium",sortable:!1}]),C=D(()=>!u.totalUsers&&!k.value),v=D({get:()=>u.selectedUsers,set:s=>u.selectUser(s)}),w=D({get:()=>u.selectAllField,set:s=>u.setSelectAllState(s)});ie(l,()=>{x()},{deep:!0}),ce(()=>{u.fetchUsers(),u.fetchRoles()}),de(()=>{u.selectAllField&&u.selectAllUsers()});function x(){S()}function S(){i.value&&i.value.refresh()}async function K({page:s,filter:r,sort:I}){let F={display_name:l.name!==null?l.name:"",phone:l.phone!==null?l.phone:"",email:l.email!==null?l.email:"",orderByField:I.fieldName||"created_at",orderBy:I.order||"desc",page:s};k.value=!0;let c=await u.fetchUsers(F);return k.value=!1,{data:c.data.data,pagination:{totalPages:c.data.meta.last_page,currentPage:s,totalCount:c.data.meta.total,limit:10}}}function L(){l.name="",l.email="",l.phone=null}function X(){y.value&&L(),y.value=!y.value}function Q(){$.openDialog({title:m("general.are_you_sure"),message:m("users.confirm_delete",2),yesLabel:m("general.ok"),noLabel:m("general.cancel"),variant:"danger",size:"lg",hideNoButton:!1}).then(s=>{s&&u.deleteMultipleUsers().then(r=>{r.data.success&&i.value&&i.value.refresh()})})}return(s,r)=>{const I=o("BaseBreadcrumbItem"),F=o("BaseBreadcrumb"),c=o("BaseIcon"),P=o("BaseButton"),Y=o("BasePageHeader"),N=o("BaseInput"),z=o("BaseInputGroup"),Z=o("BaseFilterWrapper"),ee=o("BaseEmptyPlaceholder"),te=o("BaseDropdownItem"),ae=o("BaseDropdown"),R=o("BaseCheckbox"),se=o("router-link"),le=o("BaseTable"),ne=o("BasePage");return p(),f(ne,null,{default:t(()=>[a(Y,{title:s.$t("users.title")},{actions:t(()=>[g("div",_e,[A(a(P,{variant:"primary-outline",onClick:X},{right:t(e=>[n(y)?(p(),f(c,{key:1,name:"XIcon",class:V(e.class)},null,8,["class"])):(p(),f(c,{key:0,name:"FilterIcon",class:V(e.class)},null,8,["class"]))]),default:t(()=>[B(d(s.$t("general.filter"))+" ",1)]),_:1},512),[[j,n(u).totalUsers]]),n(_).currentUser.is_owner?(p(),f(P,{key:0,onClick:r[0]||(r[0]=e=>s.$router.push("users/create"))},{left:t(e=>[a(c,{name:"PlusIcon",class:V(e.class),"aria-hidden":"true"},null,8,["class"])]),default:t(()=>[B(" "+d(s.$t("users.add_user")),1)]),_:1})):H("",!0)])]),default:t(()=>[a(F,null,{default:t(()=>[a(I,{title:s.$t("general.home"),to:"dashboard"},null,8,["title"]),a(I,{title:s.$tc("users.title",2),to:"#",active:""},null,8,["title"])]),_:1})]),_:1},8,["title"]),a(Z,{show:n(y),class:"mt-3",onClear:L},{default:t(()=>[a(z,{label:s.$tc("users.name"),class:"flex-1 mt-2 mr-4"},{default:t(()=>[a(N,{modelValue:n(l).name,"onUpdate:modelValue":r[1]||(r[1]=e=>n(l).name=e),type:"text",name:"name",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),a(z,{label:s.$tc("users.email"),class:"flex-1 mt-2 mr-4"},{default:t(()=>[a(N,{modelValue:n(l).email,"onUpdate:modelValue":r[2]||(r[2]=e=>n(l).email=e),type:"text",name:"email",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"]),a(z,{class:"flex-1 mt-2",label:s.$tc("users.phone")},{default:t(()=>[a(N,{modelValue:n(l).phone,"onUpdate:modelValue":r[3]||(r[3]=e=>n(l).phone=e),type:"text",name:"phone",autocomplete:"off"},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["show"]),A(a(ee,{title:s.$t("users.no_users"),description:s.$t("users.list_of_users")},{actions:t(()=>[n(_).currentUser.is_owner?(p(),f(P,{key:0,variant:"primary-outline",onClick:r[4]||(r[4]=e=>s.$router.push("/admin/users/create"))},{left:t(e=>[a(c,{name:"PlusIcon",class:V(e.class)},null,8,["class"])]),default:t(()=>[B(" "+d(s.$t("users.add_user")),1)]),_:1})):H("",!0)]),default:t(()=>[a(pe,{class:"mt-5 mb-4"})]),_:1},8,["title","description"]),[[j,n(C)]]),A(g("div",he,[g("div",ge,[n(u).selectedUsers.length?(p(),f(ae,{key:0},{activator:t(()=>[g("span",Be,[B(d(s.$t("general.actions"))+" ",1),a(c,{name:"ChevronDownIcon",class:"h-5"})])]),default:t(()=>[a(te,{onClick:Q},{default:t(()=>[a(c,{name:"TrashIcon",class:"h-5 mr-3 text-gray-600"}),B(" "+d(s.$t("general.delete")),1)]),_:1})]),_:1})):H("",!0)]),a(le,{ref:(e,T)=>{T.table=e,E(i)?i.value=e:i=e},data:K,columns:n(h),class:"mt-3"},me({header:t(()=>[g("div",ye,[a(R,{modelValue:n(w),"onUpdate:modelValue":r[5]||(r[5]=e=>E(w)?w.value=e:null),variant:"primary",onChange:n(u).selectAllUsers},null,8,["modelValue","onChange"])])]),"cell-status":t(({row:e})=>[g("div",ve,[a(R,{id:e.data.id,modelValue:n(v),"onUpdate:modelValue":r[6]||(r[6]=T=>E(v)?v.value=T:null),value:e.data.id,variant:"primary"},null,8,["id","modelValue","value"])])]),"cell-name":t(({row:e})=>[a(se,{to:{path:`users/${e.data.id}/edit`},class:"font-medium text-primary-500"},{default:t(()=>[B(d(e.data.name),1)]),_:2},1032,["to"])]),"cell-phone":t(({row:e})=>[g("span",null,d(e.data.phone?e.data.phone:"-"),1)]),"cell-created_at":t(({row:e})=>[g("span",null,d(e.data.formatted_created_at),1)]),_:2},[n(_).currentUser.is_owner?{name:"cell-actions",fn:t(({row:e})=>[a(fe,{row:e.data,table:n(i),"load-data":S},null,8,["row","table"])])}:void 0]),1032,["columns"])],512),[[j,!n(C)]])]),_:1})}}};export{Ie as default};
