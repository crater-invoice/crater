import{e as Y,C as k,E as J,g as h,l as F,z as it,am as W,an as ot,r as c,o as S,c as C,b as d,t as v,a as t,w as r,s as A,H as T,q as U,L as G,M as lt,n as E,m as e,I as L,ao as mt,a3 as N,F as M,h as X,ad as Z,ap as tt,k as et,p as Q,aq as ut,ar as rt,D as dt,a5 as ct}from"./main-vzIkKseS.js";import{D as _t,d as pt}from"./DragIcon-szQ4f7me.js";import{u as gt}from"./payment-ALr-TD5m.js";import{_ as yt}from"./ItemUnitModal-BC4Fg9D4.js";const ft={class:"text-gray-900 text-lg font-medium"},vt={class:"mt-1 text-sm text-gray-500"},bt={class:"overflow-x-auto"},St={class:"w-full mt-6 table-fixed"},$t=d("colgroup",null,[d("col",{style:{width:"4%"}}),d("col",{style:{width:"45%"}}),d("col",{style:{width:"27%"}}),d("col",{style:{width:"24%"}})],-1),Bt=d("thead",null,[d("tr",null,[d("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}),d("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Component "),d("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"}," Parameter "),d("th",{class:"px-5 py-3 text-sm not-italic font-medium leading-5 text-left text-gray-700 border-t border-b border-gray-200 border-solid"})])],-1),ht={class:"relative"},zt={class:"text-gray-300 cursor-move handle align-middle"},Vt={class:"px-5 py-4"},It={class:"block text-sm not-italic font-medium text-primary-800 whitespace-nowrap mr-2 min-w-[200px]"},wt={class:"text-xs text-gray-500 mt-1"},xt={class:"px-5 py-4 text-left align-middle"},Ct={class:"px-5 py-4 text-right align-middle pt-10"},Dt=U(" Remove "),Ut={colspan:"2",class:"px-5 py-4"},Ft={class:"px-5 py-4 text-right align-middle",colspan:"2"},K={props:{type:{type:String,required:!0},typeStore:{type:Object,required:!0},defaultSeries:{type:String,default:"INV"}},setup(z){const u=z,{t:m}=Y(),p=k(),g=J(),l=h([]),a=h(!1),o=h([{label:m("settings.customization.series"),description:m("settings.customization.series_description"),name:"SERIES",paramLabel:m("settings.customization.series_param_label"),value:u.defaultSeries,inputDisabled:!1,inputType:"text",allowMultiple:!1},{label:m("settings.customization.sequence"),description:m("settings.customization.sequence_description"),name:"SEQUENCE",paramLabel:m("settings.customization.sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:m("settings.customization.delimiter"),description:m("settings.customization.delimiter_description"),name:"DELIMITER",paramLabel:m("settings.customization.delimiter_param_label"),value:"-",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:m("settings.customization.customer_series"),description:m("settings.customization.customer_series_description"),name:"CUSTOMER_SERIES",paramLabel:"",value:"",inputDisabled:!0,inputType:"text",allowMultiple:!1},{label:m("settings.customization.customer_sequence"),description:m("settings.customization.customer_sequence_description"),name:"CUSTOMER_SEQUENCE",paramLabel:m("settings.customization.customer_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1},{label:m("settings.customization.date_format"),description:m("settings.customization.date_format_description"),name:"DATE_FORMAT",paramLabel:m("settings.customization.date_format_param_label"),value:"Y",inputDisabled:!1,inputType:"text",allowMultiple:!0},{label:m("settings.customization.random_sequence"),description:m("settings.customization.random_sequence_description"),name:"RANDOM_SEQUENCE",paramLabel:m("settings.customization.random_sequence_param_label"),value:"6",inputDisabled:!1,inputType:"number",allowMultiple:!1}]),s=F(()=>o.value.filter(function(f){return!l.value.some(function(V){return f.allowMultiple?!1:f.name==V.name})})),_=h(""),n=h(!1),i=h(!1),y=F(()=>{let f="";return l.value.forEach(V=>{let q=`{{${V.name}`;V.value&&(q+=`:${V.value}`),f+=`${q}}}`}),f});it(l,f=>{D()}),$();async function $(){let f={format:p.selectedCompanySettings[`${u.type}_number_format`]};i.value=!0,(await g.fetchPlaceholders(f)).data.placeholders.forEach(q=>{let H=o.value.find(j=>j.name===q.name);const P=q.value??"";l.value.push({...H,value:P,id:W.raw()})}),i.value=!1,D()}function x(f){return l.value.find(V=>V.name===f.name)}function B(f){x(f)&&!f.allowMultiple||(l.value.push({...f,id:W.raw()}),D())}function b(f){l.value=l.value.filter(function(V){return f.id!==V.id})}function w(f,V){switch(V.name){case"SERIES":f.length>=6&&(f=f.substring(0,6));break;case"DELIMITER":f.length>=1&&(f=f.substring(0,1));break}setTimeout(()=>{V.value=f,D()},100)}const D=ot(()=>{O()},500);async function O(){if(!y.value){_.value="";return}let f={key:u.type,format:y.value};n.value=!0;let V=await u.typeStore.getNextNumber(f);n.value=!1,V.data&&(_.value=V.data.nextNumber)}async function st(){if(n.value||i.value)return;a.value=!0;let f={settings:{}};return f.settings[u.type+"_number_format"]=y.value,await p.updateCompanySettings({data:f,message:`settings.customization.${u.type}s.${u.type}_settings_updated`}),a.value=!1,!0}return(f,V)=>{const q=c("BaseInput"),H=c("BaseInputGroup"),P=c("BaseIcon"),j=c("BaseButton"),at=c("BaseDropdownItem"),nt=c("BaseDropdown");return S(),C(G,null,[d("h6",ft,v(f.$t(`settings.customization.${z.type}s.${z.type}_number_format`)),1),d("p",vt,v(f.$t(`settings.customization.${z.type}s.${z.type}_number_format_description`)),1),d("div",bt,[d("table",St,[$t,Bt,t(e(pt),{modelValue:l.value,"onUpdate:modelValue":V[1]||(V[1]=I=>l.value=I),class:"divide-y divide-gray-200","item-key":"id",tag:"tbody",handle:".handle",filter:".ignore-element"},{item:r(({element:I})=>[d("tr",ht,[d("td",zt,[t(_t)]),d("td",Vt,[d("label",It,v(I.label),1),d("p",wt,v(I.description),1)]),d("td",xt,[t(H,{label:I.paramLabel,class:"lg:col-span-3",required:""},{default:r(()=>[t(q,{modelValue:I.value,"onUpdate:modelValue":[R=>I.value=R,R=>w(R,I)],disabled:I.inputDisabled,type:I.inputType},null,8,["modelValue","onUpdate:modelValue","disabled","type"])]),_:2},1032,["label"])]),d("td",Ct,[t(j,{variant:"white",onClick:A(R=>b(I),["prevent"])},{left:r(R=>[t(P,{name:"XIcon",class:T(["!sm:m-0",R.class])},null,8,["class"])]),default:r(()=>[Dt]),_:2},1032,["onClick"])])])]),footer:r(()=>[d("tr",null,[d("td",Ut,[t(H,{label:f.$t(`settings.customization.${z.type}s.preview_${z.type}_number`)},{default:r(()=>[t(q,{modelValue:_.value,"onUpdate:modelValue":V[0]||(V[0]=I=>_.value=I),disabled:"",loading:n.value},null,8,["modelValue","loading"])]),_:1},8,["label"])]),d("td",Ft,[t(nt,{"wrapper-class":"flex items-center justify-end mt-5"},{activator:r(()=>[t(j,{variant:"primary-outline"},{left:r(I=>[t(P,{class:T(I.class),name:"PlusIcon"},null,8,["class"])]),default:r(()=>[U(" "+v(f.$t("settings.customization.add_new_component")),1)]),_:1})]),default:r(()=>[(S(!0),C(G,null,lt(e(s),I=>(S(),E(at,{key:I.label,onClick:A(R=>B(I),["prevent"])},{default:r(()=>[U(v(I.label),1)]),_:2},1032,["onClick"]))),128))]),_:1})])])]),_:1},8,["modelValue"])])]),t(j,{loading:a.value,disabled:a.value,variant:"primary",type:"submit",class:"mt-4",onClick:st},{left:r(I=>[a.value?L("",!0):(S(),E(P,{key:0,class:T(I.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(f.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],64)}}},Et={setup(z){const u=mt();return(m,p)=>(S(),E(K,{type:"invoice","type-store":e(u),"default-series":"INV"},null,8,["type-store"]))}},kt={class:"text-gray-900 text-lg font-medium"},Nt={class:"mt-1 text-sm text-gray-500"},Mt={setup(z){const{t:u,tm:m}=Y(),p=k(),g=J(),l=N("utils"),a=M({retrospective_edits:null});l.mergeSettings(a,{...p.selectedCompanySettings}),F(()=>g.config.retrospective_edits.map(s=>(s.title=u(s.key),s)));async function o(){let s={settings:{...a}};return await p.updateCompanySettings({data:s,message:"settings.customization.invoices.invoice_settings_updated"}),!0}return(s,_)=>{const n=c("BaseRadio"),i=c("BaseInputGroup");return S(),C(G,null,[d("h6",kt,v(s.$tc("settings.customization.invoices.retrospective_edits")),1),d("p",Nt,v(s.$t("settings.customization.invoices.retrospective_edits_description")),1),t(i,{required:""},{default:r(()=>[t(n,{id:"allow",modelValue:e(a).retrospective_edits,"onUpdate:modelValue":[_[0]||(_[0]=y=>e(a).retrospective_edits=y),o],label:s.$t("settings.customization.invoices.allow"),size:"sm",name:"filter",value:"allow",class:"mt-2"},null,8,["modelValue","label"]),t(n,{id:"disable_on_invoice_partial_paid",modelValue:e(a).retrospective_edits,"onUpdate:modelValue":[_[1]||(_[1]=y=>e(a).retrospective_edits=y),o],label:s.$t("settings.customization.invoices.disable_on_invoice_partial_paid"),size:"sm",name:"filter",value:"disable_on_invoice_partial_paid",class:"mt-2"},null,8,["modelValue","label"]),t(n,{id:"disable_on_invoice_paid",modelValue:e(a).retrospective_edits,"onUpdate:modelValue":[_[2]||(_[2]=y=>e(a).retrospective_edits=y),o],label:s.$t("settings.customization.invoices.disable_on_invoice_paid"),size:"sm",name:"filter",value:"disable_on_invoice_paid",class:"my-2"},null,8,["modelValue","label"]),t(n,{id:"disable_on_invoice_sent",modelValue:e(a).retrospective_edits,"onUpdate:modelValue":[_[3]||(_[3]=y=>e(a).retrospective_edits=y),o],label:s.$t("settings.customization.invoices.disable_on_invoice_sent"),size:"sm",name:"filter",value:"disable_on_invoice_sent"},null,8,["modelValue","label"])]),_:1})],64)}}},Tt=["onSubmit"],qt={class:"text-gray-900 text-lg font-medium"},Gt={class:"mt-1 text-sm text-gray-500 mb-2"},Lt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},Rt={setup(z){const{t:u}=Y(),m=k(),p=N("utils");let g=h(!1);const l=M({invoice_set_due_date_automatically:null,invoice_due_date_days:null});p.mergeSettings(l,{...m.selectedCompanySettings});const a=F({get:()=>l.invoice_set_due_date_automatically==="YES",set:async n=>{const i=n?"YES":"NO";l.invoice_set_due_date_automatically=i}}),o=F(()=>({dueDateSettings:{invoice_due_date_days:{required:X.withMessage(u("validation.required"),Z(a.value)),numeric:X.withMessage(u("validation.numbers_only"),tt)}}})),s=et(o,{dueDateSettings:l});async function _(){if(s.value.dueDateSettings.$touch(),s.value.dueDateSettings.$invalid)return!1;g.value=!0;let n={settings:{...l}};return a.value||delete n.settings.invoice_due_date_days,await m.updateCompanySettings({data:n,message:"settings.customization.invoices.invoice_settings_updated"}),g.value=!1,!0}return(n,i)=>{const y=c("BaseSwitchSection"),$=c("BaseInput"),x=c("BaseInputGroup"),B=c("BaseIcon"),b=c("BaseButton");return S(),C("form",{onSubmit:A(_,["prevent"])},[d("h6",qt,v(n.$t("settings.customization.invoices.due_date")),1),d("p",Gt,v(n.$t("settings.customization.invoices.due_date_description")),1),t(y,{modelValue:e(a),"onUpdate:modelValue":i[0]||(i[0]=w=>Q(a)?a.value=w:null),title:n.$t("settings.customization.invoices.set_due_date_automatically"),description:n.$t("settings.customization.invoices.set_due_date_automatically_description")},null,8,["modelValue","title","description"]),e(a)?(S(),E(x,{key:0,label:n.$t("settings.customization.invoices.due_date_days"),error:e(s).dueDateSettings.invoice_due_date_days.$error&&e(s).dueDateSettings.invoice_due_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:r(()=>[d("div",Lt,[t($,{modelValue:e(l).invoice_due_date_days,"onUpdate:modelValue":i[1]||(i[1]=w=>e(l).invoice_due_date_days=w),invalid:e(s).dueDateSettings.invoice_due_date_days.$error,type:"number",onInput:i[2]||(i[2]=w=>e(s).dueDateSettings.invoice_due_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):L("",!0),t(b,{loading:e(g),disabled:e(g),variant:"primary",type:"submit",class:"mt-4"},{left:r(w=>[e(g)?L("",!0):(S(),E(B,{key:0,class:T(w.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(n.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Tt)}}},At=["onSubmit"],Yt={class:"text-gray-900 text-lg font-medium"},Ot={class:"mt-1 text-sm text-gray-500 mb-2"},Pt={setup(z){const u=k(),m=N("utils"),p=h(["customer","customerCustom","invoice","invoiceCustom","company"]),g=h(["billing","customer","customerCustom","invoiceCustom"]),l=h(["shipping","customer","customerCustom","invoiceCustom"]),a=h(["company","invoiceCustom"]);let o=h(!1);const s=M({invoice_mail_body:null,invoice_company_address_format:null,invoice_shipping_address_format:null,invoice_billing_address_format:null});m.mergeSettings(s,{...u.selectedCompanySettings});async function _(){o.value=!0;let n={settings:{...s}};return await u.updateCompanySettings({data:n,message:"settings.customization.invoices.invoice_settings_updated"}),o.value=!1,!0}return(n,i)=>{const y=c("BaseCustomInput"),$=c("BaseInputGroup"),x=c("BaseIcon"),B=c("BaseButton");return S(),C("form",{onSubmit:A(_,["prevent"])},[d("h6",Yt,v(n.$t("settings.customization.invoices.default_formats")),1),d("p",Ot,v(n.$t("settings.customization.invoices.default_formats_description")),1),t($,{label:n.$t("settings.customization.invoices.default_invoice_email_body"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).invoice_mail_body,"onUpdate:modelValue":i[0]||(i[0]=b=>e(s).invoice_mail_body=b),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.invoices.company_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).invoice_company_address_format,"onUpdate:modelValue":i[1]||(i[1]=b=>e(s).invoice_company_address_format=b),fields:a.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.invoices.shipping_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).invoice_shipping_address_format,"onUpdate:modelValue":i[2]||(i[2]=b=>e(s).invoice_shipping_address_format=b),fields:l.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.invoices.billing_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).invoice_billing_address_format,"onUpdate:modelValue":i[3]||(i[3]=b=>e(s).invoice_billing_address_format=b),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:e(o),disabled:e(o),variant:"primary",type:"submit",class:"mt-4"},{left:r(b=>[e(o)?L("",!0):(S(),E(x,{key:0,class:T(b.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(n.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,At)}}},jt={class:"divide-y divide-gray-200"},Qt={setup(z){const u=N("utils"),m=k(),p=M({invoice_email_attachment:null});u.mergeSettings(p,{...m.selectedCompanySettings});const g=F({get:()=>p.invoice_email_attachment==="YES",set:async l=>{const a=l?"YES":"NO";let o={settings:{invoice_email_attachment:a}};p.invoice_email_attachment=a,await m.updateCompanySettings({data:o,message:"general.setting_updated"})}});return(l,a)=>{const o=c("BaseDivider"),s=c("BaseSwitchSection");return S(),C(G,null,[t(Et),t(o,{class:"my-8"}),t(Rt),t(o,{class:"my-8"}),t(Mt),t(o,{class:"my-8"}),t(Pt),t(o,{class:"mt-6 mb-2"}),d("ul",jt,[t(s,{modelValue:e(g),"onUpdate:modelValue":a[0]||(a[0]=_=>Q(g)?g.value=_:null),title:l.$t("settings.customization.invoices.invoice_email_attachment"),description:l.$t("settings.customization.invoices.invoice_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},Ht={setup(z){const u=ut();return(m,p)=>(S(),E(K,{type:"estimate","type-store":e(u),"default-series":"EST"},null,8,["type-store"]))}},Xt=["onSubmit"],Jt={class:"text-gray-900 text-lg font-medium"},Kt={class:"mt-1 text-sm text-gray-500 mb-2"},Wt={class:"w-full sm:w-1/2 md:w-1/4 lg:w-1/5"},Zt={setup(z){const{t:u}=Y(),m=k(),p=N("utils");let g=h(!1);const l=M({estimate_set_expiry_date_automatically:null,estimate_expiry_date_days:null});p.mergeSettings(l,{...m.selectedCompanySettings});const a=F({get:()=>l.estimate_set_expiry_date_automatically==="YES",set:async n=>{const i=n?"YES":"NO";l.estimate_set_expiry_date_automatically=i}}),o=F(()=>({expiryDateSettings:{estimate_expiry_date_days:{required:X.withMessage(u("validation.required"),Z(a.value)),numeric:X.withMessage(u("validation.numbers_only"),tt)}}})),s=et(o,{expiryDateSettings:l});async function _(){if(s.value.expiryDateSettings.$touch(),s.value.expiryDateSettings.$invalid)return!1;g.value=!0;let n={settings:{...l}};return a.value||delete n.settings.estimate_expiry_date_days,await m.updateCompanySettings({data:n,message:"settings.customization.estimates.estimate_settings_updated"}),g.value=!1,!0}return(n,i)=>{const y=c("BaseSwitchSection"),$=c("BaseInput"),x=c("BaseInputGroup"),B=c("BaseIcon"),b=c("BaseButton");return S(),C("form",{onSubmit:A(_,["prevent"])},[d("h6",Jt,v(n.$t("settings.customization.estimates.expiry_date")),1),d("p",Kt,v(n.$t("settings.customization.estimates.expiry_date_description")),1),t(y,{modelValue:e(a),"onUpdate:modelValue":i[0]||(i[0]=w=>Q(a)?a.value=w:null),title:n.$t("settings.customization.estimates.set_expiry_date_automatically"),description:n.$t("settings.customization.estimates.set_expiry_date_automatically_description")},null,8,["modelValue","title","description"]),e(a)?(S(),E(x,{key:0,label:n.$t("settings.customization.estimates.expiry_date_days"),error:e(s).expiryDateSettings.estimate_expiry_date_days.$error&&e(s).expiryDateSettings.estimate_expiry_date_days.$errors[0].$message,class:"mt-2 mb-4"},{default:r(()=>[d("div",Wt,[t($,{modelValue:e(l).estimate_expiry_date_days,"onUpdate:modelValue":i[1]||(i[1]=w=>e(l).estimate_expiry_date_days=w),invalid:e(s).expiryDateSettings.estimate_expiry_date_days.$error,type:"number",onInput:i[2]||(i[2]=w=>e(s).expiryDateSettings.estimate_expiry_date_days.$touch())},null,8,["modelValue","invalid"])])]),_:1},8,["label","error"])):L("",!0),t(b,{loading:e(g),disabled:e(g),variant:"primary",type:"submit",class:"mt-4"},{left:r(w=>[e(g)?L("",!0):(S(),E(B,{key:0,class:T(w.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(n.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,Xt)}}},te=["onSubmit"],ee={class:"text-gray-900 text-lg font-medium"},se={class:"mt-1 text-sm text-gray-500 mb-2"},ae={setup(z){const u=k(),m=N("utils"),p=h(["customer","customerCustom","estimate","estimateCustom","company"]),g=h(["billing","customer","customerCustom","estimateCustom"]),l=h(["shipping","customer","customerCustom","estimateCustom"]),a=h(["company","estimateCustom"]);let o=h(!1);const s=M({estimate_mail_body:null,estimate_company_address_format:null,estimate_shipping_address_format:null,estimate_billing_address_format:null});m.mergeSettings(s,{...u.selectedCompanySettings});async function _(){o.value=!0;let n={settings:{...s}};return await u.updateCompanySettings({data:n,message:"settings.customization.estimates.estimate_settings_updated"}),o.value=!1,!0}return(n,i)=>{const y=c("BaseCustomInput"),$=c("BaseInputGroup"),x=c("BaseIcon"),B=c("BaseButton");return S(),C("form",{onSubmit:A(_,["prevent"])},[d("h6",ee,v(n.$t("settings.customization.estimates.default_formats")),1),d("p",se,v(n.$t("settings.customization.estimates.default_formats_description")),1),t($,{label:n.$t("settings.customization.estimates.default_estimate_email_body"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).estimate_mail_body,"onUpdate:modelValue":i[0]||(i[0]=b=>e(s).estimate_mail_body=b),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.estimates.company_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).estimate_company_address_format,"onUpdate:modelValue":i[1]||(i[1]=b=>e(s).estimate_company_address_format=b),fields:a.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.estimates.shipping_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).estimate_shipping_address_format,"onUpdate:modelValue":i[2]||(i[2]=b=>e(s).estimate_shipping_address_format=b),fields:l.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t($,{label:n.$t("settings.customization.estimates.billing_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(y,{modelValue:e(s).estimate_billing_address_format,"onUpdate:modelValue":i[3]||(i[3]=b=>e(s).estimate_billing_address_format=b),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(B,{loading:e(o),disabled:e(o),variant:"primary",type:"submit",class:"mt-4"},{left:r(b=>[e(o)?L("",!0):(S(),E(x,{key:0,class:T(b.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(n.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,te)}}},ne={class:"text-gray-900 text-lg font-medium"},ie={class:"mt-1 text-sm text-gray-500"},oe={setup(z){const{t:u,tm:m}=Y(),p=k(),g=J(),l=N("utils"),a=M({estimate_convert_action:null});l.mergeSettings(a,{...p.selectedCompanySettings}),F(()=>g.config.estimate_convert_action.map(s=>(s.title=u(s.key),s)));async function o(){let s={settings:{...a}};return await p.updateCompanySettings({data:s,message:"settings.customization.estimates.estimate_settings_updated"}),!0}return(s,_)=>{const n=c("BaseRadio"),i=c("BaseInputGroup");return S(),C(G,null,[d("h6",ne,v(s.$tc("settings.customization.estimates.convert_estimate_options")),1),d("p",ie,v(s.$t("settings.customization.estimates.convert_estimate_description")),1),t(i,{required:""},{default:r(()=>[t(n,{id:"no_action",modelValue:e(a).estimate_convert_action,"onUpdate:modelValue":[_[0]||(_[0]=y=>e(a).estimate_convert_action=y),o],label:s.$t("settings.customization.estimates.no_action"),size:"sm",name:"filter",value:"no_action",class:"mt-2"},null,8,["modelValue","label"]),t(n,{id:"delete_estimate",modelValue:e(a).estimate_convert_action,"onUpdate:modelValue":[_[1]||(_[1]=y=>e(a).estimate_convert_action=y),o],label:s.$t("settings.customization.estimates.delete_estimate"),size:"sm",name:"filter",value:"delete_estimate",class:"my-2"},null,8,["modelValue","label"]),t(n,{id:"mark_estimate_as_accepted",modelValue:e(a).estimate_convert_action,"onUpdate:modelValue":[_[2]||(_[2]=y=>e(a).estimate_convert_action=y),o],label:s.$t("settings.customization.estimates.mark_estimate_as_accepted"),size:"sm",name:"filter",value:"mark_estimate_as_accepted"},null,8,["modelValue","label"])]),_:1})],64)}}},le={class:"divide-y divide-gray-200"},me={setup(z){const u=N("utils"),m=k(),p=M({estimate_email_attachment:null});u.mergeSettings(p,{...m.selectedCompanySettings});const g=F({get:()=>p.estimate_email_attachment==="YES",set:async l=>{const a=l?"YES":"NO";let o={settings:{estimate_email_attachment:a}};p.estimate_email_attachment=a,await m.updateCompanySettings({data:o,message:"general.setting_updated"})}});return(l,a)=>{const o=c("BaseDivider"),s=c("BaseSwitchSection");return S(),C(G,null,[t(Ht),t(o,{class:"my-8"}),t(Zt),t(o,{class:"my-8"}),t(oe),t(o,{class:"my-8"}),t(ae),t(o,{class:"mt-6 mb-2"}),d("ul",le,[t(s,{modelValue:e(g),"onUpdate:modelValue":a[0]||(a[0]=_=>Q(g)?g.value=_:null),title:l.$t("settings.customization.estimates.estimate_email_attachment"),description:l.$t("settings.customization.estimates.estimate_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},ue={setup(z){const u=gt();return(m,p)=>(S(),E(K,{type:"payment","type-store":e(u),"default-series":"PAY"},null,8,["type-store"]))}},re=["onSubmit"],de={class:"text-gray-900 text-lg font-medium"},ce={class:"mt-1 text-sm text-gray-500 mb-2"},_e={setup(z){const u=k(),m=N("utils"),p=h(["customer","customerCustom","company","payment","paymentCustom"]),g=h(["billing","customer","customerCustom","paymentCustom"]),l=h(["company","paymentCustom"]);let a=h(!1);const o=M({payment_mail_body:null,payment_company_address_format:null,payment_from_customer_address_format:null});m.mergeSettings(o,{...u.selectedCompanySettings});async function s(){a.value=!0;let _={settings:{...o}};return await u.updateCompanySettings({data:_,message:"settings.customization.payments.payment_settings_updated"}),a.value=!1,!0}return(_,n)=>{const i=c("BaseCustomInput"),y=c("BaseInputGroup"),$=c("BaseIcon"),x=c("BaseButton");return S(),C("form",{onSubmit:A(s,["prevent"])},[d("h6",de,v(_.$t("settings.customization.payments.default_formats")),1),d("p",ce,v(_.$t("settings.customization.payments.default_formats_description")),1),t(y,{label:_.$t("settings.customization.payments.default_payment_email_body"),class:"mt-6 mb-4"},{default:r(()=>[t(i,{modelValue:e(o).payment_mail_body,"onUpdate:modelValue":n[0]||(n[0]=B=>e(o).payment_mail_body=B),fields:p.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(y,{label:_.$t("settings.customization.payments.company_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(i,{modelValue:e(o).payment_company_address_format,"onUpdate:modelValue":n[1]||(n[1]=B=>e(o).payment_company_address_format=B),fields:l.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(y,{label:_.$t("settings.customization.payments.from_customer_address_format"),class:"mt-6 mb-4"},{default:r(()=>[t(i,{modelValue:e(o).payment_from_customer_address_format,"onUpdate:modelValue":n[2]||(n[2]=B=>e(o).payment_from_customer_address_format=B),fields:g.value},null,8,["modelValue","fields"])]),_:1},8,["label"]),t(x,{loading:e(a),disabled:e(a),variant:"primary",type:"submit",class:"mt-4"},{left:r(B=>[e(a)?L("",!0):(S(),E($,{key:0,class:T(B.class),name:"SaveIcon"},null,8,["class"]))]),default:r(()=>[U(" "+v(_.$t("settings.customization.save")),1)]),_:1},8,["loading","disabled"])],40,re)}}},pe={class:"divide-y divide-gray-200"},ge={setup(z){const u=N("utils"),m=k(),p=M({payment_email_attachment:null});u.mergeSettings(p,{...m.selectedCompanySettings});const g=F({get:()=>p.payment_email_attachment==="YES",set:async l=>{const a=l?"YES":"NO";let o={settings:{payment_email_attachment:a}};p.payment_email_attachment=a,await m.updateCompanySettings({data:o,message:"general.setting_updated"})}});return(l,a)=>{const o=c("BaseDivider"),s=c("BaseSwitchSection");return S(),C(G,null,[t(ue),t(o,{class:"my-8"}),t(_e),t(o,{class:"mt-6 mb-2"}),d("ul",pe,[t(s,{modelValue:e(g),"onUpdate:modelValue":a[0]||(a[0]=_=>Q(g)?g.value=_:null),title:l.$t("settings.customization.payments.payment_email_attachment"),description:l.$t("settings.customization.payments.payment_email_attachment_setting_description")},null,8,["modelValue","title","description"])])],64)}}},ye={class:"flex flex-wrap justify-end mt-2 lg:flex-nowrap"},fe={class:"inline-block"},ve={setup(z){const{t:u}=Y(),m=h(null),p=rt(),g=dt(),l=ct(),a=F(()=>[{key:"name",label:u("settings.customization.items.unit_name"),thClass:"extra",tdClass:"font-medium text-gray-900"},{key:"actions",label:"",tdClass:"text-right text-sm font-medium",sortable:!1}]);async function o({page:i,filter:y,sort:$}){let x={orderByField:$.fieldName||"created_at",orderBy:$.order||"desc",page:i},B=await p.fetchItemUnits(x);return{data:B.data.data,pagination:{totalPages:B.data.meta.last_page,currentPage:i,totalCount:B.data.meta.total,limit:5}}}async function s(){g.openModal({title:u("settings.customization.items.add_item_unit"),componentName:"ItemUnitModal",refreshData:m.value.refresh,size:"sm"})}async function _(i){p.fetchItemUnit(i.data.id),g.openModal({title:u("settings.customization.items.edit_item_unit"),componentName:"ItemUnitModal",id:i.data.id,data:i.data,refreshData:m.value&&m.value.refresh})}function n(i){l.openDialog({title:u("general.are_you_sure"),message:u("settings.customization.items.item_unit_confirm_delete"),yesLabel:u("general.yes"),noLabel:u("general.no"),variant:"danger",hideNoButton:!1,size:"lg"}).then(async y=>{y&&(await p.deleteItemUnit(i.data.id),m.value&&m.value.refresh())})}return(i,y)=>{const $=c("BaseIcon"),x=c("BaseButton"),B=c("BaseDropdownItem"),b=c("BaseDropdown"),w=c("BaseTable");return S(),C(G,null,[t(yt),d("div",ye,[t(x,{variant:"primary-outline",onClick:s},{left:r(D=>[t($,{class:T(D.class),name:"PlusIcon"},null,8,["class"])]),default:r(()=>[U(" "+v(i.$t("settings.customization.items.add_item_unit")),1)]),_:1})]),t(w,{ref:(D,O)=>{O.table=D,m.value=D},class:"mt-10",data:o,columns:e(a)},{"cell-actions":r(({row:D})=>[t(b,null,{activator:r(()=>[d("div",fe,[t($,{name:"DotsHorizontalIcon",class:"text-gray-500"})])]),default:r(()=>[t(B,{onClick:O=>_(D)},{default:r(()=>[t($,{name:"PencilIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),U(" "+v(i.$t("general.edit")),1)]),_:2},1032,["onClick"]),t(B,{onClick:O=>n(D)},{default:r(()=>[t($,{name:"TrashIcon",class:"w-5 h-5 mr-3 text-gray-400 group-hover:text-gray-500"}),U(" "+v(i.$t("general.delete")),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:1},8,["columns"])],64)}}},be={class:"relative"},ze={setup(z){return(u,m)=>{const p=c("BaseTab"),g=c("BaseTabGroup"),l=c("BaseCard");return S(),C("div",be,[t(l,{"container-class":"px-4 py-5 sm:px-8 sm:py-2"},{default:r(()=>[t(g,null,{default:r(()=>[t(p,{"tab-panel-container":"py-4 mt-px",title:u.$t("settings.customization.invoices.title")},{default:r(()=>[t(Qt)]),_:1},8,["title"]),t(p,{"tab-panel-container":"py-4 mt-px",title:u.$t("settings.customization.estimates.title")},{default:r(()=>[t(me)]),_:1},8,["title"]),t(p,{"tab-panel-container":"py-4 mt-px",title:u.$t("settings.customization.payments.title")},{default:r(()=>[t(ge)]),_:1},8,["title"]),t(p,{"tab-panel-container":"py-4 mt-px",title:u.$t("settings.customization.items.title")},{default:r(()=>[t(ve)]),_:1},8,["title"])]),_:1})]),_:1})])}}};export{ze as default};
