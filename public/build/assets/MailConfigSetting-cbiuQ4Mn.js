import{v as T,f as j,H as J,k as V,g as f,h as I,ar as Y,i as x,j as P,Y as L,r as c,o as B,c as G,a as o,w as s,l as e,m as w,n as O,b as S,J as N,K as E,p as k,t as U,a2 as H,q as z,F as Q,ai as K,a3 as W,N as Z}from"./main-B9dpPbRR.js";import{u as A}from"./mail-driver-L7_iQECX.js";const ee={class:"flex my-10"},R={__name:"SmtpMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const $=i,v=h,n=A(),{t:u}=T.useI18n();let m=j(!1);const _=J(["tls","ssl","starttls"]),b=V(()=>m.value?"text":"password"),l=V(()=>({smtpConfig:{mail_driver:{required:f.withMessage(u("validation.required"),I)},mail_host:{required:f.withMessage(u("validation.required"),I)},mail_port:{required:f.withMessage(u("validation.required"),I),numeric:f.withMessage(u("validation.numbers_only"),Y)},mail_encryption:{required:f.withMessage(u("validation.required"),I)},from_mail:{required:f.withMessage(u("validation.required"),I),email:f.withMessage(u("validation.email_incorrect"),x)},from_name:{required:f.withMessage(u("validation.required"),I)}}})),d=P(l,V(()=>n));L(()=>{for(const a in n.smtpConfig)$.configData.hasOwnProperty(a)&&(n.smtpConfig[a]=$.configData[a])});async function g(){return d.value.smtpConfig.$touch(),d.value.smtpConfig.$invalid||v("submit-data",n.smtpConfig),!1}function p(){d.value.smtpConfig.mail_driver.$touch(),v("on-change-driver",n.smtpConfig.mail_driver)}return(a,t)=>{const q=c("BaseMultiselect"),C=c("BaseInputGroup"),D=c("BaseInput"),M=c("BaseIcon"),F=c("BaseInputGrid"),y=c("BaseButton");return B(),G("form",{onSubmit:z(g,["prevent"])},[o(F,null,{default:s(()=>[o(C,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.mail_driver.$error&&e(d).smtpConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[o(q,{modelValue:e(n).smtpConfig.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=r=>e(n).smtpConfig.mail_driver=r),p],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(d).smtpConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.mail_host.$error&&e(d).smtpConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.mail_host,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).smtpConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(d).smtpConfig.mail_host.$error,onInput:t[2]||(t[2]=r=>e(d).smtpConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.username")},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.mail_username,"onUpdate:modelValue":t[3]||(t[3]=r=>e(n).smtpConfig.mail_username=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"db_name"},null,8,["modelValue","content-loading"])]),_:1},8,["content-loading","label"]),o(C,{"content-loading":i.isFetchingInitialData,label:a.$t("settings.mail.password")},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.mail_password,"onUpdate:modelValue":t[6]||(t[6]=r=>e(n).smtpConfig.mail_password=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:b.value,name:"password"},{right:s(()=>[e(m)?(B(),w(M,{key:0,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeOffIcon",onClick:t[4]||(t[4]=r=>O(m)?m.value=!e(m):m=!e(m))})):(B(),w(M,{key:1,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeIcon",onClick:t[5]||(t[5]=r=>O(m)?m.value=!e(m):m=!e(m))}))]),_:1},8,["modelValue","content-loading","type"])]),_:1},8,["content-loading","label"]),o(C,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.mail_port.$error&&e(d).smtpConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.mail_port,"onUpdate:modelValue":t[7]||(t[7]=r=>e(n).smtpConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(d).smtpConfig.mail_port.$error,onInput:t[8]||(t[8]=r=>e(d).smtpConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.mail_encryption.$error&&e(d).smtpConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[o(q,{modelValue:e(n).smtpConfig.mail_encryption,"onUpdate:modelValue":t[9]||(t[9]=r=>e(n).smtpConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:_,searchable:!0,"show-labels":!1,placeholder:"Select option",invalid:e(d).smtpConfig.mail_encryption.$error,onInput:t[10]||(t[10]=r=>e(d).smtpConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.from_mail.$error&&e(d).smtpConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.from_mail,"onUpdate:modelValue":t[11]||(t[11]=r=>e(n).smtpConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(d).smtpConfig.from_mail.$error,onInput:t[12]||(t[12]=r=>e(d).smtpConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(d).smtpConfig.from_name.$error&&e(d).smtpConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).smtpConfig.from_name,"onUpdate:modelValue":t[13]||(t[13]=r=>e(n).smtpConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(d).smtpConfig.from_name.$error,onInput:t[14]||(t[14]=r=>e(d).smtpConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),S("div",ee,[o(y,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,type:"submit",variant:"primary"},{left:s(r=>[i.isSaving?E("",!0):(B(),w(M,{key:0,name:"SaveIcon",class:N(r.class)},null,8,["class"]))]),default:s(()=>[k(" "+U(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),H(a.$slots,"default")])],32)}}},ie={class:"flex my-10"},ne={__name:"MailgunMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const $=i,v=h,n=A(),{t:u}=T.useI18n();let m=j(!1);const _=V(()=>m.value?"text":"password"),b=V(()=>({mailgunConfig:{mail_driver:{required:f.withMessage(u("validation.required"),I)},mail_mailgun_domain:{required:f.withMessage(u("validation.required"),I)},mail_mailgun_endpoint:{required:f.withMessage(u("validation.required"),I)},mail_mailgun_secret:{required:f.withMessage(u("validation.required"),I)},from_mail:{required:f.withMessage(u("validation.required"),I),email:x},from_name:{required:f.withMessage(u("validation.required"),I)}}})),l=P(b,V(()=>n));L(()=>{for(const p in n.mailgunConfig)$.configData.hasOwnProperty(p)&&(n.mailgunConfig[p]=$.configData[p])});async function d(){return l.value.mailgunConfig.$touch(),l.value.mailgunConfig.$invalid||v("submit-data",n.mailgunConfig),!1}function g(){l.value.mailgunConfig.mail_driver.$touch(),v("on-change-driver",n.mailgunConfig.mail_driver)}return(p,a)=>{const t=c("BaseMultiselect"),q=c("BaseInputGroup"),C=c("BaseInput"),D=c("BaseIcon"),M=c("BaseInputGrid"),F=c("BaseButton");return B(),G("form",{onSubmit:z(d,["prevent"])},[o(M,null,{default:s(()=>[o(q,{label:p.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_driver.$error&&e(l).mailgunConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[o(t,{modelValue:e(n).mailgunConfig.mail_driver,"onUpdate:modelValue":[a[0]||(a[0]=y=>e(n).mailgunConfig.mail_driver=y),g],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).mailgunConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(q,{label:p.$t("settings.mail.mailgun_domain"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_domain.$error&&e(l).mailgunConfig.mail_mailgun_domain.$errors[0].$message,required:""},{default:s(()=>[o(C,{modelValue:e(n).mailgunConfig.mail_mailgun_domain,"onUpdate:modelValue":a[1]||(a[1]=y=>e(n).mailgunConfig.mail_mailgun_domain=y),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_domain",invalid:e(l).mailgunConfig.mail_mailgun_domain.$error,onInput:a[2]||(a[2]=y=>e(l).mailgunConfig.mail_mailgun_domain.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(q,{label:p.$t("settings.mail.mailgun_secret"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_secret.$error&&e(l).mailgunConfig.mail_mailgun_secret.$errors[0].$message,required:""},{default:s(()=>[o(C,{modelValue:e(n).mailgunConfig.mail_mailgun_secret,"onUpdate:modelValue":a[5]||(a[5]=y=>e(n).mailgunConfig.mail_mailgun_secret=y),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:_.value,name:"mailgun_secret",autocomplete:"off",invalid:e(l).mailgunConfig.mail_mailgun_secret.$error,onInput:a[6]||(a[6]=y=>e(l).mailgunConfig.mail_mailgun_secret.$touch())},{right:s(()=>[e(m)?(B(),w(D,{key:0,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeOffIcon",onClick:a[3]||(a[3]=y=>O(m)?m.value=!e(m):m=!e(m))})):(B(),w(D,{key:1,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeIcon",onClick:a[4]||(a[4]=y=>O(m)?m.value=!e(m):m=!e(m))}))]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"]),o(q,{label:p.$t("settings.mail.mailgun_endpoint"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.mail_mailgun_endpoint.$error&&e(l).mailgunConfig.mail_mailgun_endpoint.$errors[0].$message,required:""},{default:s(()=>[o(C,{modelValue:e(n).mailgunConfig.mail_mailgun_endpoint,"onUpdate:modelValue":a[7]||(a[7]=y=>e(n).mailgunConfig.mail_mailgun_endpoint=y),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mailgun_endpoint",invalid:e(l).mailgunConfig.mail_mailgun_endpoint.$error,onInput:a[8]||(a[8]=y=>e(l).mailgunConfig.mail_mailgun_endpoint.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(q,{label:p.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_mail.$error&&e(l).mailgunConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[o(C,{modelValue:e(n).mailgunConfig.from_mail,"onUpdate:modelValue":a[9]||(a[9]=y=>e(n).mailgunConfig.from_mail=y),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).mailgunConfig.from_mail.$error,onInput:a[10]||(a[10]=y=>e(l).mailgunConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(q,{label:p.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).mailgunConfig.from_name.$error&&e(l).mailgunConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[o(C,{modelValue:e(n).mailgunConfig.from_name,"onUpdate:modelValue":a[11]||(a[11]=y=>e(n).mailgunConfig.from_name=y),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_name",invalid:e(l).mailgunConfig.from_name.$error,onInput:a[12]||(a[12]=y=>e(l).mailgunConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),S("div",ie,[o(F,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(y=>[i.isSaving?E("",!0):(B(),w(D,{key:0,name:"SaveIcon",class:N(y.class)},null,8,["class"]))]),default:s(()=>[k(" "+U(p.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),H(p.$slots,"default")])],32)}}},ae={class:"flex my-10"},te={__name:"SesMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const $=i,v=h,n=A(),{t:u}=T.useI18n();let m=j(!1);const _=J(["tls","ssl","starttls"]),b=V(()=>({sesConfig:{mail_driver:{required:f.withMessage(u("validation.required"),I)},mail_host:{required:f.withMessage(u("validation.required"),I)},mail_port:{required:f.withMessage(u("validation.required"),I),numeric:Y},mail_ses_key:{required:f.withMessage(u("validation.required"),I)},mail_ses_secret:{required:f.withMessage(u("validation.required"),I)},mail_encryption:{required:f.withMessage(u("validation.required"),I)},from_mail:{required:f.withMessage(u("validation.required"),I),email:f.withMessage(u("validation.email_incorrect"),x)},from_name:{required:f.withMessage(u("validation.required"),I)}}})),l=P(b,V(()=>n)),d=V(()=>m.value?"text":"password");L(()=>{for(const a in n.sesConfig)$.configData.hasOwnProperty(a)&&(n.sesConfig[a]=$.configData[a])});async function g(){return l.value.sesConfig.$touch(),l.value.sesConfig.$invalid||v("submit-data",n.sesConfig),!1}function p(){l.value.sesConfig.mail_driver.$touch(),v("on-change-driver",n.sesConfig.mail_driver)}return(a,t)=>{const q=c("BaseMultiselect"),C=c("BaseInputGroup"),D=c("BaseInput"),M=c("BaseIcon"),F=c("BaseInputGrid"),y=c("BaseButton");return B(),G("form",{onSubmit:z(g,["prevent"])},[o(F,null,{default:s(()=>[o(C,{label:a.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_driver.$error&&e(l).sesConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[o(q,{modelValue:e(n).sesConfig.mail_driver,"onUpdate:modelValue":[t[0]||(t[0]=r=>e(n).sesConfig.mail_driver=r),p],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(l).sesConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.host"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_host.$error&&e(l).sesConfig.mail_host.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.mail_host,"onUpdate:modelValue":t[1]||(t[1]=r=>e(n).sesConfig.mail_host=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_host",invalid:e(l).sesConfig.mail_host.$error,onInput:t[2]||(t[2]=r=>e(l).sesConfig.mail_host.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.port"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_port.$error&&e(l).sesConfig.mail_port.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.mail_port,"onUpdate:modelValue":t[3]||(t[3]=r=>e(n).sesConfig.mail_port=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_port",invalid:e(l).sesConfig.mail_port.$error,onInput:t[4]||(t[4]=r=>e(l).sesConfig.mail_port.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.encryption"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_encryption.$error&&e(l).sesConfig.mail_encryption.$errors[0].$message,required:""},{default:s(()=>[o(q,{modelValue:e(n).sesConfig.mail_encryption,"onUpdate:modelValue":t[5]||(t[5]=r=>e(n).sesConfig.mail_encryption=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,options:_,invalid:e(l).sesConfig.mail_encryption.$error,placeholder:"Select option",onInput:t[6]||(t[6]=r=>e(l).sesConfig.mail_encryption.$touch())},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_mail.$error&&e(l).sesConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.from_mail,"onUpdate:modelValue":t[7]||(t[7]=r=>e(n).sesConfig.from_mail=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(l).sesConfig.from_mail.$error,onInput:t[8]||(t[8]=r=>e(l).sesConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.from_name.$error&&e(l).sesConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.from_name,"onUpdate:modelValue":t[9]||(t[9]=r=>e(n).sesConfig.from_name=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(l).sesConfig.from_name.$error,onInput:t[10]||(t[10]=r=>e(l).sesConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.ses_key"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_key.$error&&e(l).sesConfig.mail_ses_key.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.mail_ses_key,"onUpdate:modelValue":t[11]||(t[11]=r=>e(n).sesConfig.mail_ses_key=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"mail_ses_key",invalid:e(l).sesConfig.mail_ses_key.$error,onInput:t[12]||(t[12]=r=>e(l).sesConfig.mail_ses_key.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(C,{label:a.$t("settings.mail.ses_secret"),"content-loading":i.isFetchingInitialData,error:e(l).sesConfig.mail_ses_secret.$error&&e(l).mail_ses_secret.$errors[0].$message,required:""},{default:s(()=>[o(D,{modelValue:e(n).sesConfig.mail_ses_secret,"onUpdate:modelValue":t[15]||(t[15]=r=>e(n).sesConfig.mail_ses_secret=r),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:d.value,name:"mail_ses_secret",autocomplete:"off",invalid:e(l).sesConfig.mail_ses_secret.$error,onInput:t[16]||(t[16]=r=>e(l).sesConfig.mail_ses_secret.$touch())},{right:s(()=>[e(m)?(B(),w(M,{key:0,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeOffIcon",onClick:t[13]||(t[13]=r=>O(m)?m.value=!e(m):m=!e(m))})):(B(),w(M,{key:1,class:"mr-1 text-gray-500 cursor-pointer",name:"EyeIcon",onClick:t[14]||(t[14]=r=>O(m)?m.value=!e(m):m=!e(m))}))]),_:1},8,["modelValue","content-loading","type","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),S("div",ae,[o(y,{disabled:i.isSaving,"content-loading":i.isFetchingInitialData,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(r=>[i.isSaving?E("",!0):(B(),w(M,{key:0,name:"SaveIcon",class:N(r.class)},null,8,["class"]))]),default:s(()=>[k(" "+U(a.$t("general.save")),1)]),_:1},8,["disabled","content-loading","loading"]),H(a.$slots,"default")])],32)}}},oe={class:"flex mt-8"},X={__name:"BasicMailDriver",props:{configData:{type:Object,require:!0,default:Object},isSaving:{type:Boolean,require:!0,default:!1},isFetchingInitialData:{type:Boolean,require:!0,default:!1},mailDrivers:{type:Array,require:!0,default:Array}},emits:["submit-data","on-change-driver"],setup(i,{emit:h}){const $=i,v=h,n=A(),{t:u}=T.useI18n(),m=V(()=>({basicMailConfig:{mail_driver:{required:f.withMessage(u("validation.required"),I)},from_mail:{required:f.withMessage(u("validation.required"),I),email:f.withMessage(u("validation.email_incorrect"),x)},from_name:{required:f.withMessage(u("validation.required"),I)}}})),_=P(m,V(()=>n));L(()=>{for(const d in n.basicMailConfig)$.configData.hasOwnProperty(d)&&n.$patch(g=>{g.basicMailConfig[d]=$.configData[d]})});async function b(){return _.value.basicMailConfig.$touch(),_.value.basicMailConfig.$invalid||v("submit-data",n.basicMailConfig),!1}function l(){_.value.basicMailConfig.mail_driver.$touch(),v("on-change-driver",n.basicMailConfig.mail_driver)}return(d,g)=>{const p=c("BaseMultiselect"),a=c("BaseInputGroup"),t=c("BaseInput"),q=c("BaseInputGrid"),C=c("BaseIcon"),D=c("BaseButton");return B(),G("form",{onSubmit:z(b,["prevent"])},[o(q,null,{default:s(()=>[o(a,{label:d.$t("settings.mail.driver"),"content-loading":i.isFetchingInitialData,error:e(_).basicMailConfig.mail_driver.$error&&e(_).basicMailConfig.mail_driver.$errors[0].$message,required:""},{default:s(()=>[o(p,{modelValue:e(n).basicMailConfig.mail_driver,"onUpdate:modelValue":[g[0]||(g[0]=M=>e(n).basicMailConfig.mail_driver=M),l],"content-loading":i.isFetchingInitialData,options:i.mailDrivers,"can-deselect":!1,invalid:e(_).basicMailConfig.mail_driver.$error},null,8,["modelValue","content-loading","options","invalid"])]),_:1},8,["label","content-loading","error"]),o(a,{label:d.$t("settings.mail.from_mail"),"content-loading":i.isFetchingInitialData,error:e(_).basicMailConfig.from_mail.$error&&e(_).basicMailConfig.from_mail.$errors[0].$message,required:""},{default:s(()=>[o(t,{modelValue:e(n).basicMailConfig.from_mail,"onUpdate:modelValue":g[1]||(g[1]=M=>e(n).basicMailConfig.from_mail=M),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"from_mail",invalid:e(_).basicMailConfig.from_mail.$error,onInput:g[2]||(g[2]=M=>e(_).basicMailConfig.from_mail.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"]),o(a,{label:d.$t("settings.mail.from_name"),"content-loading":i.isFetchingInitialData,error:e(_).basicMailConfig.from_name.$error&&e(_).basicMailConfig.from_name.$errors[0].$message,required:""},{default:s(()=>[o(t,{modelValue:e(n).basicMailConfig.from_name,"onUpdate:modelValue":g[3]||(g[3]=M=>e(n).basicMailConfig.from_name=M),modelModifiers:{trim:!0},"content-loading":i.isFetchingInitialData,type:"text",name:"name",invalid:e(_).basicMailConfig.from_name.$error,onInput:g[4]||(g[4]=M=>e(_).basicMailConfig.from_name.$touch())},null,8,["modelValue","content-loading","invalid"])]),_:1},8,["label","content-loading","error"])]),_:1}),S("div",oe,[o(D,{"content-loading":i.isFetchingInitialData,disabled:i.isSaving,loading:i.isSaving,variant:"primary",type:"submit"},{left:s(M=>[i.isSaving?E("",!0):(B(),w(C,{key:0,class:N(M.class),name:"SaveIcon"},null,8,["class"]))]),default:s(()=>[k(" "+U(d.$t("general.save")),1)]),_:1},8,["content-loading","disabled","loading"]),H(d.$slots,"default")])],32)}}},le={class:"flex justify-between w-full"},re={class:"p-4 md:p-8"},se={class:"z-0 flex justify-end p-4 border-t border-gray-200 border-solid"},me={__name:"MailTestModal",setup(i){let h=j(!1),$=J({to:"",subject:"",message:""});const v=Q(),n=A(),{t:u}=T.useI18n(),m=V(()=>v.active&&v.componentName==="MailTestModal"),_={formData:{to:{required:f.withMessage(u("validation.required"),I),email:f.withMessage(u("validation.email_incorrect"),x)},subject:{required:f.withMessage(u("validation.required"),I),maxLength:f.withMessage(u("validation.subject_maxlength"),K(100))},message:{required:f.withMessage(u("validation.required"),I),maxLength:f.withMessage(u("validation.message_maxlength"),K(255))}}},b=P(_,{formData:$});function l(){$.id="",$.to="",$.subject="",$.message="",b.value.$reset()}async function d(){if(b.value.formData.$touch(),b.value.$invalid)return!0;h.value=!0,(await n.sendTestMail($)).data&&(g(),h.value=!1)}function g(){v.closeModal(),setTimeout(()=>{v.resetModalData(),l()},300)}return(p,a)=>{const t=c("BaseIcon"),q=c("BaseInput"),C=c("BaseInputGroup"),D=c("BaseTextarea"),M=c("BaseInputGrid"),F=c("BaseButton"),y=c("BaseModal");return B(),w(y,{show:m.value,onClose:g},{header:s(()=>[S("div",le,[k(U(e(v).title)+" ",1),o(t,{name:"XIcon",class:"w-6 h-6 text-gray-500 cursor-pointer",onClick:g})])]),default:s(()=>[S("form",{action:"",onSubmit:z(d,["prevent"])},[S("div",re,[o(M,{layout:"one-column"},{default:s(()=>[o(C,{label:p.$t("general.to"),error:e(b).formData.to.$error&&e(b).formData.to.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[o(q,{ref:"to",modelValue:e($).to,"onUpdate:modelValue":a[0]||(a[0]=r=>e($).to=r),type:"text",invalid:e(b).formData.to.$error,onInput:a[1]||(a[1]=r=>e(b).formData.to.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(C,{label:p.$t("general.subject"),error:e(b).formData.subject.$error&&e(b).formData.subject.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[o(q,{modelValue:e($).subject,"onUpdate:modelValue":a[2]||(a[2]=r=>e($).subject=r),type:"text",invalid:e(b).formData.subject.$error,onInput:a[3]||(a[3]=r=>e(b).formData.subject.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"]),o(C,{label:p.$t("general.message"),error:e(b).formData.message.$error&&e(b).formData.message.$errors[0].$message,variant:"horizontal",required:""},{default:s(()=>[o(D,{modelValue:e($).message,"onUpdate:modelValue":a[4]||(a[4]=r=>e($).message=r),rows:"4",cols:"50",invalid:e(b).formData.message.$error,onInput:a[5]||(a[5]=r=>e(b).formData.message.$touch())},null,8,["modelValue","invalid"])]),_:1},8,["label","error"])]),_:1})]),S("div",se,[o(F,{variant:"primary-outline",type:"button",class:"mr-3",onClick:a[6]||(a[6]=r=>g())},{default:s(()=>[k(U(p.$t("general.cancel")),1)]),_:1}),o(F,{loading:e(h),variant:"primary",type:"submit"},{left:s(r=>[e(h)?E("",!0):(B(),w(t,{key:0,name:"PaperAirplaneIcon",class:N(r.class)},null,8,["class"]))]),default:s(()=>[k(" "+U(p.$t("general.send")),1)]),_:1},8,["loading"])])],32)]),_:1},8,["show"])}}},de={key:0,class:"mt-14"},fe={__name:"MailConfigSetting",setup(i){let h=j(!1),$=j(!1);const v=A(),n=Q(),{t:u}=T.useI18n();_();function m(g){v.mail_driver=g,v.mailConfigData.mail_driver=g}async function _(){$.value=!0,Promise.all([await v.fetchMailDrivers(),await v.fetchMailConfig()]).then(([g])=>{$.value=!1})}const b=V(()=>v.mail_driver=="smtp"?R:v.mail_driver=="mailgun"?ne:v.mail_driver=="sendmail"?X:v.mail_driver=="ses"?te:v.mail_driver=="mail"?X:R);async function l(g){try{return h.value=!0,await v.updateMailConfig(g),h.value=!1,!0}catch(p){console.error(p)}}function d(){n.openModal({title:u("general.test_mail_conf"),componentName:"MailTestModal",size:"sm"})}return(g,p)=>{const a=c("BaseButton"),t=c("BaseSettingCard");return B(),G(Z,null,[o(me),o(t,{title:g.$t("settings.mail.mail_config"),description:g.$t("settings.mail.mail_config_desc")},{default:s(()=>[e(v)&&e(v).mailConfigData?(B(),G("div",de,[(B(),w(W(b.value),{"config-data":e(v).mailConfigData,"is-saving":e(h),"mail-drivers":e(v).mail_drivers,"is-fetching-initial-data":e($),onOnChangeDriver:p[0]||(p[0]=q=>m(q)),onSubmitData:l},{default:s(()=>[o(a,{variant:"primary-outline",type:"button",class:"ml-2","content-loading":e($),onClick:d},{default:s(()=>[k(U(g.$t("general.test_mail_conf")),1)]),_:1},8,["content-loading"])]),_:1},40,["config-data","is-saving","mail-drivers","is-fetching-initial-data"]))])):E("",!0)]),_:1},8,["title","description"])],64)}}};export{fe as default};
